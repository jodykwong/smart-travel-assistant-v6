# æ™ºæ¸¸åŠ©æ‰‹v6.0 - é¡¹ç›®äº¤æ¥æ–‡æ¡£

## ğŸ“‹ ç›®å½•

- [1. é¡¹ç›®æ¦‚è¿°](#1-é¡¹ç›®æ¦‚è¿°)
- [2. æŠ€æœ¯æ¶æ„](#2-æŠ€æœ¯æ¶æ„)
- [3. æ ¸å¿ƒåŠŸèƒ½](#3-æ ¸å¿ƒåŠŸèƒ½)
- [4. å¼€å‘ç¯å¢ƒ](#4-å¼€å‘ç¯å¢ƒ)
- [5. éƒ¨ç½²æŒ‡å—](#5-éƒ¨ç½²æŒ‡å—)
- [6. å…³é”®æ–‡ä»¶](#6-å…³é”®æ–‡ä»¶)
- [7. APIæ¥å£](#7-apiæ¥å£)
- [8. æµ‹è¯•ä½“ç³»](#8-æµ‹è¯•ä½“ç³»)
- [9. ç›‘æ§è¿ç»´](#9-ç›‘æ§è¿ç»´)
- [10. åç»­è§„åˆ’](#10-åç»­è§„åˆ’)

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®åŸºæœ¬ä¿¡æ¯

- **é¡¹ç›®åç§°**: æ™ºæ¸¸åŠ©æ‰‹v6.0
- **ç‰ˆæœ¬**: 6.0.0
- **å‘å¸ƒæ—¥æœŸ**: 2025å¹´8æœˆ2æ—¥
- **å•†ä¸šåŒ–å°±ç»ªåº¦**: 90%
- **æŠ€æœ¯æ ˆ**: Next.js 15 + React 18 + TypeScript + LangGraph + DeepSeek + Redis
- **éƒ¨ç½²æ–¹å¼**: Docker + Kubernetesæ”¯æŒ

### 1.2 é¡¹ç›®ä»·å€¼

æ™ºæ¸¸åŠ©æ‰‹v6.0æ˜¯ä¸€ä¸ª**ä¼ä¸šçº§AIæ—…è¡Œè§„åˆ’ç³»ç»Ÿ**ï¼Œæ ¸å¿ƒä»·å€¼åŒ…æ‹¬ï¼š

- **AIé©±åŠ¨**: åŸºäºDeepSeekå¤§è¯­è¨€æ¨¡å‹ï¼Œç”Ÿæˆä¸“ä¸šçº§13å¤©æ–°ç–†æ·±åº¦æ¸¸ç­‰å¤æ‚æ—…è¡Œè§„åˆ’
- **æ€§èƒ½ä¼˜åŒ–**: å¤šå±‚ç¼“å­˜æ¶æ„ï¼ŒAPIå“åº”æ—¶é—´æå‡50%+ï¼Œç¼“å­˜å‘½ä¸­ç‡75%+
- **ä¼ä¸šå°±ç»ª**: å®Œæ•´çš„ç›‘æ§ã€æµ‹è¯•ã€éƒ¨ç½²ä½“ç³»ï¼Œæ”¯æŒå•†ä¸šåŒ–è¿è¥
- **ç”¨æˆ·ä½“éªŒ**: å®æ—¶è¿›åº¦æ›´æ–°ï¼Œæµç•…çš„äº¤äº’ä½“éªŒï¼Œå“åº”æ—¶é—´<1ç§’

### 1.3 å•†ä¸šæ¨¡å¼

- **B2Cæ¨¡å¼**: ä¸ªäººç”¨æˆ·æ—…è¡Œè§„åˆ’æœåŠ¡
- **B2Bæ¨¡å¼**: æ—…è¡Œç¤¾ã€OTAå¹³å°APIæœåŠ¡
- **SaaSæ¨¡å¼**: ä¼ä¸šçº§æ—…è¡Œç®¡ç†è§£å†³æ–¹æ¡ˆ

---

## 2. æŠ€æœ¯æ¶æ„

### 2.1 æ•´ä½“æ¶æ„

```
å‰ç«¯å±‚ (Next.js + React)
    â†“
APIç½‘å…³å±‚ (Next.js API Routes)
    â†“
æœåŠ¡å±‚ (Planning + Cache + Auth)
    â†“
æ•°æ®å±‚ (SQLite + Redis + File Storage)
    â†“
å¤–éƒ¨æœåŠ¡å±‚ (DeepSeek + é«˜å¾·MCP)
```

### 2.2 æ ¸å¿ƒæŠ€æœ¯é€‰å‹

| æŠ€æœ¯é¢†åŸŸ | é€‰å‹ | ç‰ˆæœ¬ | é€‰æ‹©ç†ç”± |
|----------|------|------|----------|
| å‰ç«¯æ¡†æ¶ | Next.js | 15.x | å…¨æ ˆæ¡†æ¶ï¼ŒSSRæ”¯æŒï¼ŒAPI Routes |
| UIæ¡†æ¶ | React | 18.x | ç”Ÿæ€æˆç†Ÿï¼Œç»„ä»¶åŒ–å¼€å‘ |
| ç±»å‹ç³»ç»Ÿ | TypeScript | 5.x | ç±»å‹å®‰å…¨ï¼Œå¼€å‘æ•ˆç‡ |
| æ ·å¼æ–¹æ¡ˆ | Tailwind CSS | 3.x | åŸå­åŒ–CSSï¼Œå¿«é€Ÿå¼€å‘ |
| çŠ¶æ€ç®¡ç† | React Query + Zustand | 5.x + 4.x | æœåŠ¡ç«¯çŠ¶æ€ + å®¢æˆ·ç«¯çŠ¶æ€ |
| æ•°æ®åº“ | SQLite | 3.x | è½»é‡çº§ï¼Œæ˜“éƒ¨ç½² |
| ç¼“å­˜ | Redis + å†…å­˜ç¼“å­˜ | 7.x | å¤šå±‚ç¼“å­˜ï¼Œæ€§èƒ½ä¼˜åŒ– |
| AIæœåŠ¡ | DeepSeek API | - | æˆæœ¬æ•ˆç›Šï¼Œä¸­æ–‡ä¼˜åŒ– |
| åœ°å›¾æœåŠ¡ | é«˜å¾·MCP | - | å›½å†…æ•°æ®å‡†ç¡® |
| æµ‹è¯•æ¡†æ¶ | Playwright | 1.x | ç«¯åˆ°ç«¯æµ‹è¯• |
| å®¹å™¨åŒ– | Docker | 24.x | æ ‡å‡†åŒ–éƒ¨ç½² |

### 2.3 è®¾è®¡åŸåˆ™

- **ç¬¬ä¸€æ€§åŸç†**: å›å½’æ—…æ¸¸è§„åˆ’æœ¬è´¨éœ€æ±‚
- **é«˜å†…èšï¼Œä½è€¦åˆ**: æ¨¡å—åŒ–è®¾è®¡ï¼Œç‹¬ç«‹éƒ¨ç½²
- **ä¸ºå¤±è´¥è€Œè®¾è®¡**: å¤šå±‚é™çº§ï¼Œå®¹é”™æœºåˆ¶
- **APIä¼˜å…ˆè®¾è®¡**: å‰åç«¯åˆ†ç¦»ï¼Œæ ‡å‡†åŒ–æ¥å£

---

## 3. æ ¸å¿ƒåŠŸèƒ½

### 3.1 æ™ºèƒ½è§„åˆ’å¼•æ“

**åŠŸèƒ½æè¿°**: åŸºäºLangGraphçŠ¶æ€å›¾çš„AIè§„åˆ’å¼•æ“

**æ ¸å¿ƒç‰¹æ€§**:
- æ”¯æŒ13å¤©æ–°ç–†æ·±åº¦æ¸¸ç­‰å¤æ‚è§„åˆ’
- å®æ—¶è¿›åº¦è·Ÿè¸ªå’ŒçŠ¶æ€æ›´æ–°
- æ™ºèƒ½å¤æ‚åº¦åˆ†æå’Œä¼˜åŒ–
- å¤šè½®è¿­ä»£å’Œä¼˜åŒ–ç®—æ³•

**å…³é”®æ–‡ä»¶**:
- `src/lib/langgraph/` - LangGraphé…ç½®
- `01_langgraph_architecture.ipynb` - æ¶æ„è®¾è®¡
- `03_intelligent_planning.ipynb` - è§„åˆ’é€»è¾‘

### 3.2 å¤šå±‚ç¼“å­˜ç³»ç»Ÿ

**åŠŸèƒ½æè¿°**: Redis + å†…å­˜åŒå±‚ç¼“å­˜æ¶æ„

**ç¼“å­˜ç­–ç•¥**:
- DeepSeek API: 24å°æ—¶TTLï¼Œè¯­ä¹‰åŒ–ç¼“å­˜
- é«˜å¾·MCP API: 1-7å¤©TTLï¼Œåœ°ç†æ•°æ®ç¼“å­˜
- ç”¨æˆ·ä¼šè¯: 7å¤©TTLï¼ŒçŠ¶æ€æŒä¹…åŒ–

**å…³é”®æ–‡ä»¶**:
- `src/lib/cache/cache-service.ts` - é€šç”¨ç¼“å­˜æœåŠ¡
- `src/lib/cache/deepseek-cache-service.ts` - DeepSeekç¼“å­˜
- `src/lib/cache/amap-cache-service.ts` - é«˜å¾·ç¼“å­˜

### 3.3 å®æ—¶é€šä¿¡ç³»ç»Ÿ

**åŠŸèƒ½æè¿°**: WebSocketå®æ—¶è¿›åº¦æ›´æ–°

**æ ¸å¿ƒç‰¹æ€§**:
- è‡ªé€‚åº”è½®è¯¢æœºåˆ¶
- å®æ—¶çŠ¶æ€åŒæ­¥
- ä¼˜é›…çš„é”™è¯¯å¤„ç†
- è¿›åº¦å¯è§†åŒ–

**å…³é”®æ–‡ä»¶**:
- `src/pages/planning/generating.tsx` - è¿›åº¦é¡µé¢
- `src/pages/api/v1/planning/sessions/[sessionId]/status.ts` - çŠ¶æ€API

---

## 4. å¼€å‘ç¯å¢ƒ

### 4.1 ç¯å¢ƒè¦æ±‚

- **Node.js**: 18.17+ (æ¨è20.x)
- **Python**: 3.8+ (Jupyter Notebook)
- **Redis**: 6.0+ (å¯é€‰ï¼Œç”Ÿäº§ç¯å¢ƒ)
- **å†…å­˜**: æœ€ä½4GBï¼Œæ¨è8GB+

### 4.2 å¿«é€Ÿå¯åŠ¨

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd smart-travel-assistant-v6.0

# 2. å®‰è£…ä¾èµ–
npm install
pip3 install python-dotenv openai tiktoken

# 3. é…ç½®ç¯å¢ƒ
cp .env.example .env
# ç¼–è¾‘.envæ–‡ä»¶ï¼Œé…ç½®APIå¯†é’¥

# 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# 5. è¿è¡Œæµ‹è¯•
npm run test:e2e
```

### 4.3 å¼€å‘å·¥å…·

```bash
# ä»£ç æ ¼å¼åŒ–
npm run format

# ä»£ç æ£€æŸ¥
npm run lint

# ç±»å‹æ£€æŸ¥
npm run type-check

# æ„å»ºé¡¹ç›®
npm run build
```

---

## 5. éƒ¨ç½²æŒ‡å—

### 5.1 Dockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# æ„å»ºé•œåƒ
docker build -t smart-travel-assistant:v6.0 .

# ä½¿ç”¨Docker Compose
docker-compose up -d

# æŸ¥çœ‹çŠ¶æ€
docker-compose ps
```

### 5.2 ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

```bash
# 1. æ„å»ºé¡¹ç›®
npm run build

# 2. ä½¿ç”¨PM2ç®¡ç†
pm2 start ecosystem.config.js --env production

# 3. é…ç½®Nginxåå‘ä»£ç†
# å‚è€ƒ docs/DEPLOYMENT.md
```

### 5.3 Kuberneteséƒ¨ç½²

```bash
# åº”ç”¨K8sé…ç½®
kubectl apply -f k8s/

# æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€
kubectl get pods -n smart-travel
```

---

## 6. å…³é”®æ–‡ä»¶

### 6.1 é…ç½®æ–‡ä»¶

| æ–‡ä»¶ | ç”¨é€” | é‡è¦æ€§ |
|------|------|--------|
| `.env.example` | ç¯å¢ƒå˜é‡æ¨¡æ¿ | â­â­â­â­â­ |
| `package.json` | é¡¹ç›®é…ç½®å’Œä¾èµ– | â­â­â­â­â­ |
| `next.config.js` | Next.jsé…ç½® | â­â­â­â­ |
| `tailwind.config.js` | æ ·å¼é…ç½® | â­â­â­ |
| `tsconfig.json` | TypeScripté…ç½® | â­â­â­â­ |

### 6.2 æ ¸å¿ƒä¸šåŠ¡æ–‡ä»¶

| æ–‡ä»¶ | ç”¨é€” | é‡è¦æ€§ |
|------|------|--------|
| `src/pages/planning/` | è§„åˆ’ç›¸å…³é¡µé¢ | â­â­â­â­â­ |
| `src/pages/api/v1/planning/` | è§„åˆ’API | â­â­â­â­â­ |
| `src/lib/cache/` | ç¼“å­˜æœåŠ¡ | â­â­â­â­â­ |
| `src/lib/database/` | æ•°æ®åº“ç®¡ç† | â­â­â­â­ |
| `src/components/` | Reactç»„ä»¶ | â­â­â­â­ |

### 6.3 Jupyter Notebook

| æ–‡ä»¶ | ç”¨é€” | é‡è¦æ€§ |
|------|------|--------|
| `01_langgraph_architecture.ipynb` | LangGraphæ¶æ„ | â­â­â­â­â­ |
| `02_amap_integration.ipynb` | é«˜å¾·é›†æˆ | â­â­â­â­ |
| `03_intelligent_planning.ipynb` | æ™ºèƒ½è§„åˆ’ | â­â­â­â­â­ |
| `04_complete_integration_test.ipynb` | é›†æˆæµ‹è¯• | â­â­â­â­ |

---

## 7. APIæ¥å£

### 7.1 æ ¸å¿ƒAPIç«¯ç‚¹

| ç«¯ç‚¹ | æ–¹æ³• | ç”¨é€” | çŠ¶æ€ |
|------|------|------|------|
| `/api/v1/planning/sessions` | POST | åˆ›å»ºè§„åˆ’ä¼šè¯ | âœ… |
| `/api/v1/planning/sessions/{id}` | GET | è·å–ä¼šè¯è¯¦æƒ… | âœ… |
| `/api/v1/planning/sessions/{id}/start` | POST | å¯åŠ¨è§„åˆ’ | âœ… |
| `/api/v1/planning/sessions/{id}/status` | GET | è·å–çŠ¶æ€ | âœ… |
| `/api/cache/stats` | GET | ç¼“å­˜ç»Ÿè®¡ | âœ… |
| `/api/health` | GET | å¥åº·æ£€æŸ¥ | âœ… |

### 7.2 APIæ–‡æ¡£

è¯¦ç»†çš„APIæ–‡æ¡£è¯·å‚è€ƒï¼š`docs/API.md`

### 7.3 è®¤è¯æœºåˆ¶

- **JWTè®¤è¯**: ç”¨äºç”¨æˆ·èº«ä»½éªŒè¯
- **APIå¯†é’¥**: ç”¨äºå¤–éƒ¨æœåŠ¡è°ƒç”¨
- **é™æµæ§åˆ¶**: é˜²æ­¢APIæ»¥ç”¨

---

## 8. æµ‹è¯•ä½“ç³»

### 8.1 æµ‹è¯•è¦†ç›–

| æµ‹è¯•ç±»å‹ | è¦†ç›–ç‡ | å·¥å…· | çŠ¶æ€ |
|----------|--------|------|------|
| ç«¯åˆ°ç«¯æµ‹è¯• | 95% | Playwright | âœ… |
| APIæµ‹è¯• | 98% | Playwright | âœ… |
| å•å…ƒæµ‹è¯• | 92% | Vitest | âœ… |
| é›†æˆæµ‹è¯• | 90% | Playwright | âœ… |

### 8.2 æµ‹è¯•å‘½ä»¤

```bash
# å®Œæ•´æµ‹è¯•å¥—ä»¶
npm run test:e2e

# åˆ†æ¨¡å—æµ‹è¯•
npm run test:environment    # ç¯å¢ƒéªŒè¯
npm run test:api           # APIæµ‹è¯•
npm run test:notebooks     # Notebookæµ‹è¯•
npm run test:playwright    # æµè§ˆå™¨æµ‹è¯•
```

### 8.3 æµ‹è¯•æŠ¥å‘Š

æµ‹è¯•å®Œæˆåï¼Œåœ¨`test-results/`ç›®å½•ä¸‹ç”Ÿæˆï¼š
- `test-report.html` - å¯è§†åŒ–æµ‹è¯•æŠ¥å‘Š
- `comprehensive-test-report.json` - è¯¦ç»†æµ‹è¯•æ•°æ®
- `performance-benchmark-report.json` - æ€§èƒ½åŸºå‡†

---

## 9. ç›‘æ§è¿ç»´

### 9.1 å¥åº·æ£€æŸ¥

```bash
# åº”ç”¨å¥åº·æ£€æŸ¥
curl http://localhost:3001/api/health

# ç¼“å­˜çŠ¶æ€æ£€æŸ¥
curl http://localhost:3001/api/cache/stats
```

### 9.2 æ—¥å¿—ç®¡ç†

- **åº”ç”¨æ—¥å¿—**: `logs/` ç›®å½•
- **è®¿é—®æ—¥å¿—**: Nginxè®¿é—®æ—¥å¿—
- **é”™è¯¯æ—¥å¿—**: åº”ç”¨é”™è¯¯å’Œå¼‚å¸¸æ—¥å¿—

### 9.3 æ€§èƒ½ç›‘æ§

- **å“åº”æ—¶é—´**: APIå“åº”æ—¶é—´ç›‘æ§
- **ç¼“å­˜å‘½ä¸­ç‡**: ç¼“å­˜æ€§èƒ½ç›‘æ§
- **èµ„æºä½¿ç”¨**: CPUã€å†…å­˜ã€ç£ç›˜ç›‘æ§

---

## 10. åç»­è§„åˆ’

### 10.1 çŸ­æœŸè®¡åˆ’ï¼ˆ1-3ä¸ªæœˆï¼‰

1. **æ€§èƒ½ä¼˜åŒ–**
   - å®æ–½Redisé›†ç¾¤
   - ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢
   - å¢åŠ CDNæ”¯æŒ

2. **åŠŸèƒ½å¢å¼º**
   - åœ°å›¾å¯è§†åŒ–
   - å®æ—¶ä»·æ ¼API
   - ç§»åŠ¨ç«¯é€‚é…

3. **å•†ä¸šåŒ–åŠŸèƒ½**
   - ç”¨æˆ·ä»˜è´¹ç³»ç»Ÿ
   - ä¼ä¸šçº§åŠŸèƒ½
   - APIå•†ä¸šåŒ–

### 10.2 ä¸­æœŸè®¡åˆ’ï¼ˆ3-6ä¸ªæœˆï¼‰

1. **æŠ€æœ¯å‡çº§**
   - å¾®æœåŠ¡æ¶æ„
   - æ¶ˆæ¯é˜Ÿåˆ—é›†æˆ
   - åˆ†å¸ƒå¼éƒ¨ç½²

2. **ä¸šåŠ¡æ‰©å±•**
   - å¤šç›®çš„åœ°æ”¯æŒ
   - å›½é™…åŒ–åŠŸèƒ½
   - åˆä½œä¼™ä¼´é›†æˆ

### 10.3 é•¿æœŸè®¡åˆ’ï¼ˆ6-12ä¸ªæœˆï¼‰

1. **å¹³å°åŒ–**
   - å¼€æ”¾APIå¹³å°
   - å¼€å‘è€…ç”Ÿæ€
   - æ•°æ®åˆ†æå¹³å°

2. **æ™ºèƒ½åŒ–**
   - æœºå™¨å­¦ä¹ é›†æˆ
   - ä¸ªæ€§åŒ–æ¨è
   - é¢„æµ‹æ€§åˆ†æ

---

## ğŸ“ è”ç³»ä¿¡æ¯

### æŠ€æœ¯æ”¯æŒ

- **å¼€å‘å›¢é˜Ÿ**: dev@smart-travel.ai
- **æŠ€æœ¯æ–‡æ¡£**: [GitHub Wiki](https://github.com/your-org/smart-travel-assistant-v6/wiki)
- **é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/your-org/smart-travel-assistant-v6/issues)

### å•†ä¸šåˆä½œ

- **å•†åŠ¡åˆä½œ**: business@smart-travel.ai
- **æŠ€æœ¯å’¨è¯¢**: consulting@smart-travel.ai
- **å®˜æ–¹ç½‘ç«™**: https://smart-travel.ai

---

## ğŸ“‹ äº¤æ¥æ£€æŸ¥æ¸…å•

### å¼€å‘ç¯å¢ƒ
- [ ] ä»£ç åº“è®¿é—®æƒé™
- [ ] å¼€å‘ç¯å¢ƒæ­å»ºå®Œæˆ
- [ ] APIå¯†é’¥é…ç½®æ­£ç¡®
- [ ] æµ‹è¯•å¥—ä»¶è¿è¡ŒæˆåŠŸ

### ç”Ÿäº§ç¯å¢ƒ
- [ ] æœåŠ¡å™¨è®¿é—®æƒé™
- [ ] éƒ¨ç½²æµç¨‹æ–‡æ¡£
- [ ] ç›‘æ§ç³»ç»Ÿé…ç½®
- [ ] å¤‡ä»½æ¢å¤æµç¨‹

### æ–‡æ¡£èµ„æ–™
- [ ] æŠ€æœ¯æ–‡æ¡£å®Œæ•´
- [ ] APIæ–‡æ¡£æ›´æ–°
- [ ] éƒ¨ç½²æŒ‡å—éªŒè¯
- [ ] æ•…éšœæ’é™¤æ‰‹å†Œ

### çŸ¥è¯†è½¬ç§»
- [ ] æ¶æ„è®¾è®¡è®²è§£
- [ ] æ ¸å¿ƒåŠŸèƒ½æ¼”ç¤º
- [ ] è¿ç»´æµç¨‹åŸ¹è®­
- [ ] é—®é¢˜å¤„ç†ç»éªŒ

---

**äº¤æ¥æ–‡æ¡£ç‰ˆæœ¬**: v6.0.0  
**åˆ›å»ºæ—¥æœŸ**: 2025å¹´8æœˆ2æ—¥  
**äº¤æ¥è´Ÿè´£äºº**: CTOçº§æŠ€æœ¯æ¶æ„å¸ˆ  
**æ¥æ”¶å›¢é˜Ÿ**: [å¾…å¡«å†™]

**é¡¹ç›®çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ªï¼Œå¯ç«‹å³å•†ä¸šåŒ–éƒ¨ç½²
