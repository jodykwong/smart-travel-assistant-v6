<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êô∫Ê∏∏Âä©Êâãv6.2 - ÁúüÂÆûÊî∂Ê¨æÁ†ÅÈÖçÁΩÆÊïôÁ®ã</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .progress-bar {
            background: #ecf0f1;
            border-radius: 10px;
            height: 8px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            border-radius: 10px;
            width: 0%;
            transition: width 0.3s ease;
        }

        .nav-tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 5px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            text-align: center;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            color: #7f8c8d;
        }

        .nav-tab.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .card h2 {
            color: #2c3e50;
            font-size: 1.8em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card h3 {
            color: #34495e;
            font-size: 1.3em;
            margin: 25px 0 15px 0;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }

        .step-list {
            list-style: none;
            counter-reset: step-counter;
        }

        .step-list li {
            counter-increment: step-counter;
            margin-bottom: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #3498db;
            position: relative;
        }

        .step-list li::before {
            content: "Ê≠•È™§ " counter(step-counter);
            position: absolute;
            top: -10px;
            left: 15px;
            background: #3498db;
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
            margin: 15px 0;
            position: relative;
            overflow-x: auto;
        }

        .code-block::before {
            content: attr(data-lang);
            position: absolute;
            top: 10px;
            right: 15px;
            background: #34495e;
            color: #ecf0f1;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 0.7em;
            text-transform: uppercase;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 80px;
            background: #27ae60;
            color: white;
            border: none;
            padding: 5px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8em;
            transition: background 0.3s ease;
        }

        .copy-btn:hover {
            background: #229954;
        }

        .alert {
            padding: 15px 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid;
            position: relative;
        }

        .alert-info {
            background: #e8f4fd;
            border-color: #3498db;
            color: #2980b9;
        }

        .alert-warning {
            background: #fef9e7;
            border-color: #f39c12;
            color: #d68910;
        }

        .alert-success {
            background: #eafaf1;
            border-color: #27ae60;
            color: #1e8449;
        }

        .alert-danger {
            background: #fdeaea;
            border-color: #e74c3c;
            color: #c0392b;
        }

        .btn {
            display: inline-block;
            padding: 12px 25px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: bold;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
        }

        .btn-warning {
            background: linear-gradient(45deg, #f39c12, #e67e22);
        }

        .btn-danger {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
        }

        .config-editor {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }

        .config-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
            margin: 5px 0;
        }

        .config-label {
            font-weight: bold;
            color: #2c3e50;
            margin-top: 15px;
            margin-bottom: 5px;
            display: block;
        }

        .qr-preview {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }

        .qr-item {
            flex: 1;
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 2px dashed #ddd;
        }

        .qr-placeholder {
            width: 150px;
            height: 150px;
            background: #ecf0f1;
            border-radius: 10px;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #7f8c8d;
            font-size: 0.9em;
        }

        .validation-result {
            margin: 20px 0;
            padding: 15px;
            border-radius: 10px;
            display: none;
        }

        .validation-result.show {
            display: block;
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .troubleshoot-item {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
        }

        .troubleshoot-item h4 {
            color: #d68910;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .nav-tabs {
                flex-direction: column;
            }

            .two-column {
                grid-template-columns: 1fr;
            }

            .qr-preview {
                flex-direction: column;
            }
        }

        .highlight {
            background: linear-gradient(45deg, #fff3cd, #ffeaa7);
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
        }

        .command-hint {
            background: #e8f5e8;
            border: 1px solid #c3e6c3;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.85em;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Â§¥ÈÉ® -->
        <div class="header">
            <h1>üöÄ Êô∫Ê∏∏Âä©Êâãv6.2</h1>
            <div style="font-size: 1.2em; color: #7f8c8d; margin-bottom: 20px;">
                ÁúüÂÆûÊî∂Ê¨æÁ†ÅÈÖçÁΩÆÊïôÁ®ã
            </div>
            <div style="background: linear-gradient(45deg, #27ae60, #2ecc71); color: white; padding: 10px 20px; border-radius: 15px; display: inline-block;">
                <strong>‚úÖ ‰ªéÁ§∫‰æãÊï∞ÊçÆÂà∞ÁúüÂÆûÊî∂Ê¨æ | ÂÆåÊï¥ÈÖçÁΩÆÊåáÂçó</strong>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <div id="progressText" style="margin-top: 10px; color: #7f8c8d;">ÂáÜÂ§áÂºÄÂßãÈÖçÁΩÆ...</div>
        </div>

        <!-- ÂØºËà™Ê†áÁ≠æ -->
        <div class="nav-tabs">
            <div class="nav-tab active" onclick="showTab('step1')">
                <span style="font-size: 1.2em;">üì±</span><br>
                Ëé∑ÂèñÊî∂Ê¨æÁ†Å
            </div>
            <div class="nav-tab" onclick="showTab('step2')">
                <span style="font-size: 1.2em;">‚öôÔ∏è</span><br>
                ÈÖçÁΩÆÊõøÊç¢
            </div>
            <div class="nav-tab" onclick="showTab('step3')">
                <span style="font-size: 1.2em;">üß™</span><br>
                ÈõÜÊàêÊµãËØï
            </div>
            <div class="nav-tab" onclick="showTab('step4')">
                <span style="font-size: 1.2em;">üõ°Ô∏è</span><br>
                ÂÆâÂÖ®Ê≥®ÊÑè
            </div>
            <div class="nav-tab" onclick="showTab('step5')">
                <span style="font-size: 1.2em;">üîß</span><br>
                ÊïÖÈöúÊéíÈô§
            </div>
        </div>

        <!-- Ê≠•È™§1ÔºöËé∑ÂèñÁúüÂÆûÊî∂Ê¨æÁ†Å -->
        <div id="step1" class="tab-content active">
            <div class="card">
                <h2><span style="font-size: 1.5em;">üì±</span>Ëé∑ÂèñÁúüÂÆûÊî∂Ê¨æÁ†Å</h2>

                <div class="alert alert-info">
                    <strong>üí° ÂΩìÂâçÁä∂ÊÄÅ</strong><br>
                    ÊÇ®ÁöÑÈ°πÁõÆÂ∑≤ÈÖçÁΩÆÁ§∫‰æãÊî∂Ê¨æÁ†ÅÊï∞ÊçÆÔºåÁé∞Âú®ÈúÄË¶ÅÊõøÊç¢‰∏∫ÁúüÂÆûÁöÑ‰∏™‰∫∫Êî∂Ê¨æÁ†Å‰ª•ÂÆûÁé∞ÁúüÂÆûÊî∂Ê¨æÂäüËÉΩ„ÄÇ
                </div>

                <div class="two-column">
                    <div>
                        <h3>üü¢ ÂæÆ‰ø°‰∏™‰∫∫Êî∂Ê¨æÁ†Å</h3>

                        <ol class="step-list">
                            <li>
                                <strong>ÊâìÂºÄÂæÆ‰ø°Êî∂Ê¨æÁ†Å</strong>
                                <p>ÊâìÂºÄÂæÆ‰ø° ‚Üí Âè≥‰∏äËßí"+" ‚Üí Êî∂‰ªòÊ¨æ ‚Üí ‰∫åÁª¥Á†ÅÊî∂Ê¨æ</p>
                                <div class="alert alert-warning">
                                    <strong>‚ö†Ô∏è Ê≥®ÊÑè</strong>Ôºö‰ΩøÁî®‰∏™‰∫∫Êî∂Ê¨æÁ†ÅÔºå‰∏çÊòØÂïÜÂÆ∂Êî∂Ê¨æÁ†Å
                                </div>
                            </li>

                            <li>
                                <strong>‰øùÂ≠òÊî∂Ê¨æÁ†ÅÂõæÁâá</strong>
                                <p>ÈïøÊåâ‰∫åÁª¥Á†Å ‚Üí ‰øùÂ≠òÂà∞Áõ∏ÂÜå</p>
                                <div class="command-hint">
                                    üí° Âª∫ËÆÆ‰øùÂ≠ò‰∏∫Ôºöwechat_qr_code.png
                                </div>
                            </li>

                            <li>
                                <strong>ÊèêÂèñ‰∫åÁª¥Á†ÅÊï∞ÊçÆ</strong>
                                <p>‰ΩøÁî®Âú®Á∫ø‰∫åÁª¥Á†ÅËß£ÊûêÂ∑•ÂÖ∑ÊàñÊâãÊú∫Êâ´Á†ÅËé∑ÂèñÊï∞ÊçÆÔºö</p>
                                <div class="code-block" data-lang="example">
ÂæÆ‰ø°Êî∂Ê¨æÁ†ÅÊ†ºÂºèÁ§∫‰æãÔºö
wxp://f2f0[Èïø‰∏≤Â≠óÁ¨¶]
Êàñ
weixin://wxpay/bizpayurl?pr=[ÂèÇÊï∞]
                                    <button class="copy-btn" onclick="copyCode(this)">Â§çÂà∂</button>
                                </div>
                            </li>
                        </ol>
                    </div>

                    <div>
                        <h3>üîµ ÊîØ‰ªòÂÆù‰∏™‰∫∫Êî∂Ê¨æÁ†Å</h3>

                        <ol class="step-list">
                            <li>
                                <strong>ÊâìÂºÄÊîØ‰ªòÂÆùÊî∂Ê¨æÁ†Å</strong>
                                <p>ÊâìÂºÄÊîØ‰ªòÂÆù ‚Üí È¶ñÈ°µ"Êî∂Èí±" ‚Üí ‰∏™‰∫∫Êî∂Ê¨æ</p>
                                <div class="alert alert-warning">
                                    <strong>‚ö†Ô∏è Ê≥®ÊÑè</strong>ÔºöÈÄâÊã©‰∏™‰∫∫Êî∂Ê¨æÔºå‰∏çÊòØÂïÜÂÆ∂ÊúçÂä°
                                </div>
                            </li>

                            <li>
                                <strong>‰øùÂ≠òÊî∂Ê¨æÁ†ÅÂõæÁâá</strong>
                                <p>ÁÇπÂáª"‰øùÂ≠òÂõæÁâá" Êàñ Êà™Âõæ‰øùÂ≠ò</p>
                                <div class="command-hint">
                                    üí° Âª∫ËÆÆ‰øùÂ≠ò‰∏∫Ôºöalipay_qr_code.png
                                </div>
                            </li>

                            <li>
                                <strong>ÊèêÂèñ‰∫åÁª¥Á†ÅÊï∞ÊçÆ</strong>
                                <p>‰ΩøÁî®Âú®Á∫ø‰∫åÁª¥Á†ÅËß£ÊûêÂ∑•ÂÖ∑Ëé∑ÂèñÊï∞ÊçÆÔºö</p>
                                <div class="code-block" data-lang="example">
ÊîØ‰ªòÂÆùÊî∂Ê¨æÁ†ÅÊ†ºÂºèÁ§∫‰æãÔºö
https://qr.alipay.com/[ÂèÇÊï∞]
Êàñ
alipays://platformapi/startapp?[ÂèÇÊï∞]
                                    <button class="copy-btn" onclick="copyCode(this)">Â§çÂà∂</button>
                                </div>
                            </li>
                        </ol>
                    </div>
                </div>

                <div class="alert alert-success">
                    <strong>‚úÖ Êé®ËçêÂ∑•ÂÖ∑</strong><br>
                    ‚Ä¢ Âú®Á∫ø‰∫åÁª¥Á†ÅËß£ÊûêÔºö<a href="https://cli.im/deqr" target="_blank">ËçâÊñô‰∫åÁª¥Á†Å</a><br>
                    ‚Ä¢ ÊâãÊú∫Â∫îÁî®ÔºöÂæÆ‰ø°Êâ´‰∏ÄÊâ´„ÄÅÊîØ‰ªòÂÆùÊâ´‰∏ÄÊâ´<br>
                    ‚Ä¢ ÊµèËßàÂô®Êèí‰ª∂ÔºöQR Code Reader
                </div>

                <div class="qr-preview">
                    <div class="qr-item">
                        <div class="qr-placeholder">
                            ÂæÆ‰ø°Êî∂Ê¨æÁ†Å<br>È¢ÑËßàÂå∫Âüü
                        </div>
                        <input type="file" id="wechatQRFile" accept="image/*" onchange="previewQR(this, 'wechat')" style="margin-top: 10px;">
                        <div id="wechatQRData" style="margin-top: 10px; font-family: monospace; font-size: 0.8em; color: #666;"></div>
                    </div>

                    <div class="qr-item">
                        <div class="qr-placeholder">
                            ÊîØ‰ªòÂÆùÊî∂Ê¨æÁ†Å<br>È¢ÑËßàÂå∫Âüü
                        </div>
                        <input type="file" id="alipayQRFile" accept="image/*" onchange="previewQR(this, 'alipay')" style="margin-top: 10px;">
                        <div id="alipayQRData" style="margin-top: 10px; font-family: monospace; font-size: 0.8em; color: #666;"></div>
                    </div>
                </div>

                <button class="btn btn-success" onclick="nextStep()">‰∏ã‰∏ÄÊ≠•ÔºöÈÖçÁΩÆÊõøÊç¢ ‚Üí</button>
            </div>
        </div>

        <!-- Ê≠•È™§2ÔºöÈÖçÁΩÆÊõøÊç¢ÊåáÂçó -->
        <div id="step2" class="tab-content">
            <div class="card">
                <h2><span style="font-size: 1.5em;">‚öôÔ∏è</span>ÈÖçÁΩÆÊõøÊç¢ÊåáÂçó</h2>

                <div class="alert alert-info">
                    <strong>üìÅ ÈÖçÁΩÆÊñá‰ª∂‰ΩçÁΩÆ</strong><br>
                    ÊÇ®ÈúÄË¶ÅÁºñËæëÈ°πÁõÆÊ†πÁõÆÂΩï‰∏ãÁöÑ <span class="highlight">.env.local</span> Êñá‰ª∂
                </div>

                <h3>üîß ÂΩìÂâçÈÖçÁΩÆÁä∂ÊÄÅ</h3>
                <div class="code-block" data-lang="env">
# ÂΩìÂâçÁ§∫‰æãÈÖçÁΩÆÔºàÈúÄË¶ÅÊõøÊç¢Ôºâ
WECHAT_PERSONAL_QR_CODE=wxp://f2f0example_wechat_qr_code_data_for_testing
ALIPAY_PERSONAL_QR_CODE=https://qr.alipay.com/fkx123456789example_alipay_qr_code_data
                    <button class="copy-btn" onclick="copyCode(this)">Â§çÂà∂</button>
                </div>

                <h3>üìù ÈÖçÁΩÆÁºñËæëÂô®</h3>
                <div class="config-editor">
                    <label class="config-label">üü¢ ÂæÆ‰ø°Êî∂Ê¨æÁ†ÅÊï∞ÊçÆ</label>
                    <input type="text" class="config-input" id="wechatQRInput"
                           placeholder="Á≤òË¥¥ÊÇ®ÁöÑÂæÆ‰ø°Êî∂Ê¨æÁ†ÅÊï∞ÊçÆÔºåÊ†ºÂºèÂ¶ÇÔºöwxp://f2f0..."
                           oninput="updateConfig()">

                    <label class="config-label">üü¢ ÂæÆ‰ø°Êî∂Ê¨æ‰∫∫ÂßìÂêç</label>
                    <input type="text" class="config-input" id="wechatNameInput"
                           value="Êô∫Ê∏∏Âä©ÊâãÊî∂Ê¨æ‰∏ìÁî®"
                           oninput="updateConfig()">

                    <label class="config-label">üü¢ ÂæÆ‰ø°Êî∂Ê¨æË¥¶Êà∑</label>
                    <input type="text" class="config-input" id="wechatAccountInput"
                           value="smart_travel_wechat_2024"
                           oninput="updateConfig()">

                    <label class="config-label">üîµ ÊîØ‰ªòÂÆùÊî∂Ê¨æÁ†ÅÊï∞ÊçÆ</label>
                    <input type="text" class="config-input" id="alipayQRInput"
                           placeholder="Á≤òË¥¥ÊÇ®ÁöÑÊîØ‰ªòÂÆùÊî∂Ê¨æÁ†ÅÊï∞ÊçÆÔºåÊ†ºÂºèÂ¶ÇÔºöhttps://qr.alipay.com/..."
                           oninput="updateConfig()">

                    <label class="config-label">üîµ ÊîØ‰ªòÂÆùÊî∂Ê¨æ‰∫∫ÂßìÂêç</label>
                    <input type="text" class="config-input" id="alipayNameInput"
                           value="Êô∫Ê∏∏Âä©ÊâãÊîØ‰ªòÂÆùÊî∂Ê¨æ"
                           oninput="updateConfig()">

                    <label class="config-label">üîµ ÊîØ‰ªòÂÆùÊî∂Ê¨æË¥¶Êà∑</label>
                    <input type="text" class="config-input" id="alipayAccountInput"
                           value="smart_travel_alipay_2024"
                           oninput="updateConfig()">

                    <label class="config-label">üí∞ ÂçïÁ¨îÊúÄÂ§ßÈáëÈ¢ùÔºàÂÖÉÔºâ</label>
                    <input type="number" class="config-input" id="maxAmountInput"
                           value="300" min="1" max="1000"
                           oninput="updateConfig()">

                    <label class="config-label">üí∞ Êó•ÈôêÈ¢ùÔºàÂÖÉÔºâ</label>
                    <input type="number" class="config-input" id="dailyLimitInput"
                           value="3000" min="100" max="10000"
                           oninput="updateConfig()">
                </div>

                <h3>üìã ÁîüÊàêÁöÑÈÖçÁΩÆ‰ª£Á†Å</h3>
                <div class="code-block" data-lang="env" id="generatedConfig">
# Á≠âÂæÖÊÇ®ËæìÂÖ•ÈÖçÁΩÆ‰ø°ÊÅØ...
                    <button class="copy-btn" onclick="copyGeneratedConfig()">Â§çÂà∂ÈÖçÁΩÆ</button>
                </div>

                <div class="alert alert-warning">
                    <strong>‚ö†Ô∏è ÈÖçÁΩÆÊ≠•È™§</strong><br>
                    1. Âú®‰∏äÊñπÁºñËæëÂô®‰∏≠ËæìÂÖ•ÊÇ®ÁöÑÁúüÂÆûÊî∂Ê¨æÁ†ÅÊï∞ÊçÆ<br>
                    2. ÁÇπÂáª"Â§çÂà∂ÈÖçÁΩÆ"ÊåâÈíÆ<br>
                    3. ÊâìÂºÄÈ°πÁõÆÁöÑ <code>.env.local</code> Êñá‰ª∂<br>
                    4. ÊâæÂà∞QRÊîØ‰ªòÈÖçÁΩÆÈÉ®ÂàÜÔºåÊõøÊç¢ÂØπÂ∫îÁöÑÈÖçÁΩÆÈ°π<br>
                    5. ‰øùÂ≠òÊñá‰ª∂
                </div>

                <button class="btn btn-warning" onclick="validateConfig()">È™åËØÅÈÖçÁΩÆ</button>
                <button class="btn btn-success" onclick="nextStep()">‰∏ã‰∏ÄÊ≠•ÔºöÈõÜÊàêÊµãËØï ‚Üí</button>

                <div id="configValidation" class="validation-result"></div>
            </div>
        </div>

        <!-- Ê≠•È™§3ÔºöÂºÄÂèëÁéØÂ¢ÉÈõÜÊàêÊµãËØï -->
        <div id="step3" class="tab-content">
            <div class="card">
                <h2><span style="font-size: 1.5em;">üß™</span>ÂºÄÂèëÁéØÂ¢ÉÈõÜÊàêÊµãËØï</h2>

                <div class="alert alert-success">
                    <strong>üéØ ÊµãËØïÁõÆÊ†á</strong><br>
                    È™åËØÅÁúüÂÆûÊî∂Ê¨æÁ†ÅÈÖçÁΩÆÊòØÂê¶Ê≠£Á°ÆÔºåÁ°Æ‰øùÊîØ‰ªòÊµÅÁ®ãËÉΩÂ§üÊ≠£Â∏∏Â∑•‰Ωú
                </div>

                <h3>1Ô∏è‚É£ ÈÖçÁΩÆÈ™åËØÅÊµãËØï</h3>
                <div class="code-block" data-lang="bash">
# ËøêË°åQRÊîØ‰ªòÈÖçÁΩÆÈ™åËØÅ
npx tsx scripts/qr-payment-config-validator.ts
                    <button class="copy-btn" onclick="copyCode(this)">Â§çÂà∂</button>
                </div>

                <div class="alert alert-info">
                    <strong>‚úÖ È¢ÑÊúüÁªìÊûú</strong>ÔºöQRÊîØ‰ªòÈÖçÁΩÆÂ∞±Áª™Â∫¶Â∫îËØ•ËææÂà∞ 90%+
                </div>

                <h3>2Ô∏è‚É£ JWTËÆ§ËØÅÁ≥ªÁªüÈ™åËØÅ</h3>
                <div class="code-block" data-lang="bash">
# È™åËØÅJWTËÆ§ËØÅÁ≥ªÁªü‰∏éQRÊîØ‰ªòÁöÑÈõÜÊàê
npx tsx scripts/jwt-production-check.ts
                    <button class="copy-btn" onclick="copyCode(this)">Â§çÂà∂</button>
                </div>

                <h3>3Ô∏è‚É£ Á´ØÂà∞Á´ØÊîØ‰ªòÊµÅÁ®ãÊµãËØï</h3>
                <div class="code-block" data-lang="bash">
# ËøêË°åÂÆåÊï¥ÁöÑÊîØ‰ªòÊµÅÁ®ãÊµãËØï
npx playwright test tests/e2e/qr-payment-flow.spec.ts
                    <button class="copy-btn" onclick="copyCode(this)">Â§çÂà∂</button>
                </div>

                <h3>4Ô∏è‚É£ ÂºÄÂèëÊúçÂä°Âô®ÂêØÂä®ÊµãËØï</h3>
                <div class="code-block" data-lang="bash">
# ÂêØÂä®ÂºÄÂèëÊúçÂä°Âô®
npm run dev

# ËÆøÈóÆÊîØ‰ªòÈ°µÈù¢ÊµãËØï
# http://localhost:3004/payment
                    <button class="copy-btn" onclick="copyCode(this)">Â§çÂà∂</button>
                </div>

                <h3>üîç ÊâãÂä®ÊµãËØïÊ≠•È™§</h3>
                <ol class="step-list">
                    <li>
                        <strong>ÂêØÂä®ÂºÄÂèëÊúçÂä°Âô®</strong>
                        <p>ËøêË°å <code>npm run dev</code> ÂêØÂä®È°πÁõÆ</p>
                    </li>

                    <li>
                        <strong>ËÆøÈóÆÊîØ‰ªòÈ°µÈù¢</strong>
                        <p>Âú®ÊµèËßàÂô®‰∏≠ËÆøÈóÆ <code>http://localhost:3004/payment</code></p>
                    </li>

                    <li>
                        <strong>ÂàõÂª∫ÊµãËØïËÆ¢Âçï</strong>
                        <p>ÈÄâÊã©ÊîØ‰ªòÊñπÂºèÔºàÂæÆ‰ø°ÊàñÊîØ‰ªòÂÆùÔºâÔºåËæìÂÖ•Â∞èÈ¢ùÊµãËØïÈáëÈ¢ùÔºàÂ¶Ç1ÂÖÉÔºâ</p>
                    </li>

                    <li>
                        <strong>È™åËØÅÊî∂Ê¨æÁ†ÅÊòæÁ§∫</strong>
                        <p>Á°ÆËÆ§ÊòæÁ§∫ÁöÑÊòØÊÇ®ÈÖçÁΩÆÁöÑÁúüÂÆûÊî∂Ê¨æÁ†ÅÔºåËÄå‰∏çÊòØÁ§∫‰æãÊï∞ÊçÆ</p>
                    </li>

                    <li>
                        <strong>ÊµãËØïÊîØ‰ªòÊµÅÁ®ã</strong>
                        <p>‰ΩøÁî®ÊâãÊú∫Êâ´Á†ÅÔºåÂÆåÊàêÂ∞èÈ¢ùÊµãËØïÊîØ‰ªòÔºåÈ™åËØÅÊï¥‰∏™ÊµÅÁ®ã</p>
                    </li>
                </ol>

                <div class="alert alert-warning">
                    <strong>üí° ÊµãËØïÂª∫ËÆÆ</strong><br>
                    ‚Ä¢ ‰ΩøÁî®Â∞èÈ¢ùÈáëÈ¢ùÊµãËØïÔºà1-5ÂÖÉÔºâ<br>
                    ‚Ä¢ ÊµãËØïÂÆåÊàêÂêéÂèØ‰ª•ÈÄöËøáÊîØ‰ªòÂπ≥Âè∞ÈÄÄÊ¨æ<br>
                    ‚Ä¢ ËÆ∞ÂΩïÊµãËØïËøáÁ®ã‰∏≠ÁöÑ‰ªª‰ΩïÈîôËØØ‰ø°ÊÅØ<br>
                    ‚Ä¢ È™åËØÅÊîØ‰ªòÂá≠ËØÅ‰∏ä‰º†ÂäüËÉΩÊòØÂê¶Ê≠£Â∏∏
                </div>

                <button class="btn btn-success" onclick="runAllTests()">üöÄ ËøêË°åÊâÄÊúâÊµãËØï</button>
                <button class="btn btn-success" onclick="nextStep()">‰∏ã‰∏ÄÊ≠•ÔºöÂÆâÂÖ®Ê≥®ÊÑè ‚Üí</button>
            </div>
        </div>

        <!-- Ê≠•È™§4ÔºöÂÆâÂÖ®Ê≥®ÊÑè‰∫ãÈ°π -->
        <div id="step4" class="tab-content">
            <div class="card">
                <h2><span style="font-size: 1.5em;">üõ°Ô∏è</span>ÂÆâÂÖ®Ê≥®ÊÑè‰∫ãÈ°π</h2>

                <div class="alert alert-danger">
                    <strong>üö® ÈáçË¶ÅÂÆâÂÖ®ÊèêÈÜí</strong><br>
                    ‰∏™‰∫∫Êî∂Ê¨æÁ†ÅÊ∂âÂèäÁúüÂÆûËµÑÈáëÔºåËØ∑Âä°ÂøÖÈÅµÂæ™ÂÆâÂÖ®‰ΩøÁî®ËßÑËåÉ
                </div>

                <h3>üîí ‰∏™‰∫∫Êî∂Ê¨æÁ†ÅÂÆâÂÖ®‰ΩøÁî®ËßÑËåÉ</h3>
                <div class="two-column">
                    <div>
                        <h4 style="color: #27ae60;">‚úÖ ÂÆâÂÖ®ÂÅöÊ≥ï</h4>
                        <ul style="list-style-type: none; padding: 0;">
                            <li style="margin: 10px 0; padding: 10px; background: #eafaf1; border-radius: 5px;">
                                ‚úÖ ‰ªÖÁî®‰∫éÂ∞èÈ¢ùÊî∂Ê¨æÔºàÂª∫ËÆÆÂçïÁ¨î‰∏çË∂ÖËøá500ÂÖÉÔºâ
                            </li>
                            <li style="margin: 10px 0; padding: 10px; background: #eafaf1; border-radius: 5px;">
                                ‚úÖ ÂÆöÊúüÊõ¥Êç¢Êî∂Ê¨æÁ†ÅÔºàÂª∫ËÆÆÊØèÊúàÊõ¥Êç¢Ôºâ
                            </li>
                            <li style="margin: 10px 0; padding: 10px; background: #eafaf1; border-radius: 5px;">
                                ‚úÖ ‰øùÁïôÊâÄÊúâ‰∫§ÊòìËÆ∞ÂΩïÂíåÊîØ‰ªòÂá≠ËØÅ
                            </li>
                            <li style="margin: 10px 0; padding: 10px; background: #eafaf1; border-radius: 5px;">
                                ‚úÖ ËÆæÁΩÆÂêàÁêÜÁöÑÈáëÈ¢ùÈôêÂà∂ÂíåÊó•ÈôêÈ¢ù
                            </li>
                            <li style="margin: 10px 0; padding: 10px; background: #eafaf1; border-radius: 5px;">
                                ‚úÖ ÂèäÊó∂Â§ÑÁêÜÁî®Êà∑ÁöÑÊîØ‰ªòÈ™åËØÅËØ∑Ê±Ç
                            </li>
                        </ul>
                    </div>

                    <div>
                        <h4 style="color: #e74c3c;">‚ùå È£éÈô©Ë°å‰∏∫</h4>
                        <ul style="list-style-type: none; padding: 0;">
                            <li style="margin: 10px 0; padding: 10px; background: #fdeaea; border-radius: 5px;">
                                ‚ùå Âú®ÂÖ¨ÂºÄÂú∫ÊâÄÂ±ïÁ§∫Êî∂Ê¨æÁ†Å
                            </li>
                            <li style="margin: 10px 0; padding: 10px; background: #fdeaea; border-radius: 5px;">
                                ‚ùå Â∞ÜÊî∂Ê¨æÁ†ÅÊï∞ÊçÆÂ≠òÂÇ®Âú®‰∏çÂÆâÂÖ®ÁöÑÂú∞Êñπ
                            </li>
                            <li style="margin: 10px 0; padding: 10px; background: #fdeaea; border-radius: 5px;">
                                ‚ùå Áî®‰∫éÂ§ßÈ¢ù‰∫§ÊòìÊàñÂïÜ‰∏öÁî®ÈÄî
                            </li>
                            <li style="margin: 10px 0; padding: 10px; background: #fdeaea; border-radius: 5px;">
                                ‚ùå ÂøΩÁï•ÂºÇÂ∏∏ÁöÑÊîØ‰ªòËØ∑Ê±Ç
                            </li>
                            <li style="margin: 10px 0; padding: 10px; background: #fdeaea; border-radius: 5px;">
                                ‚ùå ‰∏éÈôåÁîü‰∫∫ÂàÜ‰∫´Êî∂Ê¨æÁ†Å‰ø°ÊÅØ
                            </li>
                        </ul>
                    </div>
                </div>

                <h3>üèóÔ∏è ÂºÄÂèëÁéØÂ¢É‰∏éÁîü‰∫ßÁéØÂ¢ÉÈÖçÁΩÆÂå∫Âà´</h3>
                <div class="code-block" data-lang="env">
# ÂºÄÂèëÁéØÂ¢ÉÈÖçÁΩÆ (.env.local)
NODE_ENV=development
QR_PAYMENT_ENABLED=true
WECHAT_PERSONAL_MAX_AMOUNT=30000  # 300ÂÖÉÔºåÈÄÇÂêàÊµãËØï
ALIPAY_PERSONAL_MAX_AMOUNT=30000

# Áîü‰∫ßÁéØÂ¢ÉÈÖçÁΩÆ (.env.production)
NODE_ENV=production
QR_PAYMENT_ENABLED=true
WECHAT_PERSONAL_MAX_AMOUNT=50000  # 500ÂÖÉÔºåÁîü‰∫ßÈôêÂà∂
ALIPAY_PERSONAL_MAX_AMOUNT=50000
# Áîü‰∫ßÁéØÂ¢ÉÂ∫î‰ΩøÁî®‰∏çÂêåÁöÑÊî∂Ê¨æÁ†Å
                    <button class="copy-btn" onclick="copyCode(this)">Â§çÂà∂</button>
                </div>

                <h3>üîê Êî∂Ê¨æÁ†ÅÊ≥ÑÈú≤È£éÈô©Èò≤ËåÉ</h3>
                <div class="alert alert-warning">
                    <strong>‚ö†Ô∏è Â¶ÇÊûúÊî∂Ê¨æÁ†ÅÊ≥ÑÈú≤ÔºåËØ∑Á´ãÂç≥Ôºö</strong><br>
                    1. Êõ¥Êç¢Êñ∞ÁöÑÊî∂Ê¨æÁ†Å<br>
                    2. Êõ¥Êñ∞È°πÁõÆÈÖçÁΩÆ<br>
                    3. Ê£ÄÊü•ÊòØÂê¶ÊúâÂºÇÂ∏∏‰∫§Êòì<br>
                    4. ÈÄöÁü•Áõ∏ÂÖ≥Áî®Êà∑Á≥ªÁªüÁª¥Êä§
                </div>

                <h3>üìä ÁõëÊéßÂíåÂÆ°ËÆ°</h3>
                <div class="code-block" data-lang="javascript">
// Âª∫ËÆÆÊ∑ªÂä†ÁöÑÁõëÊéß‰ª£Á†Å
const paymentMonitor = {
  // ËÆ∞ÂΩïÊâÄÊúâÊîØ‰ªòËØ∑Ê±Ç
  logPaymentRequest: (orderId, amount, userId) => {
    console.log(`Payment Request: ${orderId}, Amount: ${amount}, User: ${userId}`);
  },

  // ÁõëÊéßÂºÇÂ∏∏ÈáëÈ¢ù
  checkAbnormalAmount: (amount) => {
    const maxAmount = parseInt(process.env.WECHAT_PERSONAL_MAX_AMOUNT) || 50000;
    if (amount > maxAmount) {
      console.warn(`Abnormal payment amount detected: ${amount}`);
      return false;
    }
    return true;
  }
};
                    <button class="copy-btn" onclick="copyCode(this)">Â§çÂà∂</button>
                </div>

                <button class="btn btn-success" onclick="nextStep()">‰∏ã‰∏ÄÊ≠•ÔºöÊïÖÈöúÊéíÈô§ ‚Üí</button>
            </div>
        </div>

        <!-- Ê≠•È™§5ÔºöÊïÖÈöúÊéíÈô§ -->
        <div id="step5" class="tab-content">
            <div class="card">
                <h2><span style="font-size: 1.5em;">üîß</span>ÊïÖÈöúÊéíÈô§</h2>

                <h3>üö® Â∏∏ËßÅÈÖçÁΩÆÈîôËØØÂèäËß£ÂÜ≥ÊñπÊ°à</h3>

                <div class="troubleshoot-item">
                    <h4>‚ùå ÈóÆÈ¢òÔºöQRÊîØ‰ªòÈÖçÁΩÆÈ™åËØÅÂ§±Ë¥•</h4>
                    <p><strong>ÁóáÁä∂</strong>ÔºöËøêË°åÈ™åËØÅËÑöÊú¨Êó∂ÊòæÁ§∫ÈÖçÁΩÆÂ∞±Áª™Â∫¶‰Ωé‰∫é80%</p>
                    <p><strong>Ëß£ÂÜ≥ÊñπÊ°à</strong>Ôºö</p>
                    <div class="code-block" data-lang="bash">
# 1. Ê£ÄÊü•ÁéØÂ¢ÉÂèòÈáèÊòØÂê¶Ê≠£Á°ÆÂä†ËΩΩ
echo $QR_PAYMENT_ENABLED

# 2. ÈáçÊñ∞ËøêË°åÈÖçÁΩÆ‰øÆÂ§çËÑöÊú¨
npx tsx scripts/fix-qr-payment-config.ts

# 3. È™åËØÅÈÖçÁΩÆÊñá‰ª∂Ê†ºÂºè
cat .env.local | grep QR_PAYMENT
                        <button class="copy-btn" onclick="copyCode(this)">Â§çÂà∂</button>
                    </div>
                </div>

                <div class="troubleshoot-item">
                    <h4>‚ùå ÈóÆÈ¢òÔºöÊî∂Ê¨æÁ†ÅÊï∞ÊçÆÊ†ºÂºèÈîôËØØ</h4>
                    <p><strong>ÁóáÁä∂</strong>ÔºöÊîØ‰ªòÈ°µÈù¢ÊòæÁ§∫ÈîôËØØÊàñÊó†Ê≥ïÁîüÊàê‰∫åÁª¥Á†Å</p>
                    <p><strong>Ëß£ÂÜ≥ÊñπÊ°à</strong>Ôºö</p>
                    <div class="code-block" data-lang="text">
Ê≠£Á°ÆÁöÑÊî∂Ê¨æÁ†ÅÊ†ºÂºèÔºö
ÂæÆ‰ø°Ôºöwxp://f2f0[Â≠óÁ¨¶‰∏≤] Êàñ weixin://wxpay/bizpayurl?pr=[ÂèÇÊï∞]
ÊîØ‰ªòÂÆùÔºöhttps://qr.alipay.com/[ÂèÇÊï∞] Êàñ alipays://platformapi/startapp?[ÂèÇÊï∞]

ÈîôËØØÊ†ºÂºèÁ§∫‰æãÔºö
‚ùå ÂõæÁâáÊñá‰ª∂Ë∑ØÂæÑÔºö/path/to/qr_code.png
‚ùå Base64ÂõæÁâáÊï∞ÊçÆÔºödata:image/png;base64,iVBORw0KG...
‚ùå ‰∏çÂÆåÊï¥ÁöÑURLÔºöqr.alipay.com/abc
                        <button class="copy-btn" onclick="copyCode(this)">Â§çÂà∂</button>
                    </div>
                </div>

                <div class="troubleshoot-item">
                    <h4>‚ùå ÈóÆÈ¢òÔºöÊîØ‰ªòÊúçÂä°ÂàùÂßãÂåñÂ§±Ë¥•</h4>
                    <p><strong>ÁóáÁä∂</strong>ÔºöÂêØÂä®È°πÁõÆÊó∂Âá∫Áé∞"QRPaymentServiceÂàùÂßãÂåñÂ§±Ë¥•"ÈîôËØØ</p>
                    <p><strong>Ëß£ÂÜ≥ÊñπÊ°à</strong>Ôºö</p>
                    <div class="code-block" data-lang="bash">
# 1. Ê£ÄÊü•‰æùËµñÊòØÂê¶ÂÆâË£ÖÂÆåÊï¥
npm install

# 2. Ê∏ÖÁêÜÁºìÂ≠òÈáçÊñ∞ÂÆâË£Ö
rm -rf node_modules package-lock.json
npm install

# 3. Ê£ÄÊü•TypeScriptÁºñËØë
npx tsc --noEmit
                        <button class="copy-btn" onclick="copyCode(this)">Â§çÂà∂</button>
                    </div>
                </div>

                <div class="troubleshoot-item">
                    <h4>‚ùå ÈóÆÈ¢òÔºöJWTËÆ§ËØÅ‰∏éQRÊîØ‰ªòÈõÜÊàêÂ§±Ë¥•</h4>
                    <p><strong>ÁóáÁä∂</strong>ÔºöÊîØ‰ªòËØ∑Ê±ÇËøîÂõû401Êú™ÊéàÊùÉÈîôËØØ</p>
                    <p><strong>Ëß£ÂÜ≥ÊñπÊ°à</strong>Ôºö</p>
                    <div class="code-block" data-lang="bash">
# 1. È™åËØÅJWTÈÖçÁΩÆ
npx tsx scripts/jwt-production-check.ts

# 2. Ê£ÄÊü•JWTÂØÜÈí•ÈÖçÁΩÆ
echo $JWT_ACCESS_SECRET
echo $JWT_REFRESH_SECRET

# 3. ÈáçÊñ∞ÁîüÊàêJWTÂØÜÈí•ÔºàÂ¶ÇÊûúÈúÄË¶ÅÔºâ
openssl rand -base64 32
                        <button class="copy-btn" onclick="copyCode(this)">Â§çÂà∂</button>
                    </div>
                </div>

                <h3>üîç Êî∂Ê¨æÁ†ÅÊó†ÊïàÊó∂ÁöÑÂ§ÑÁêÜÊñπÊ≥ï</h3>
                <ol class="step-list">
                    <li>
                        <strong>È™åËØÅÊî∂Ê¨æÁ†ÅÊúâÊïàÊÄß</strong>
                        <p>‰ΩøÁî®ÊâãÊú∫Êâ´Á†ÅÊµãËØïÔºåÁ°ÆËÆ§Êî∂Ê¨æÁ†ÅÂèØ‰ª•Ê≠£Â∏∏‰ΩøÁî®</p>
                    </li>

                    <li>
                        <strong>Ê£ÄÊü•Êï∞ÊçÆÊ†ºÂºè</strong>
                        <p>Á°Æ‰øùÂ§çÂà∂ÁöÑÊòØÂÆåÊï¥ÁöÑURLÊàñÂçèËÆÆÊï∞ÊçÆÔºå‰∏çÊòØÂõæÁâáË∑ØÂæÑ</p>
                    </li>

                    <li>
                        <strong>ÈáçÊñ∞Ëé∑ÂèñÊî∂Ê¨æÁ†Å</strong>
                        <p>Â¶ÇÊûúÊî∂Ê¨æÁ†ÅËøáÊúüÔºåÈáçÊñ∞ÁîüÊàêÊñ∞ÁöÑÊî∂Ê¨æÁ†Å</p>
                    </li>

                    <li>
                        <strong>Êõ¥Êñ∞ÈÖçÁΩÆÊñá‰ª∂</strong>
                        <p>Â∞ÜÊñ∞ÁöÑÊî∂Ê¨æÁ†ÅÊï∞ÊçÆÊõ¥Êñ∞Âà∞.env.localÊñá‰ª∂‰∏≠</p>
                    </li>
                </ol>

                <h3>üß™ ÊîØ‰ªòÊµãËØïÂ§±Ë¥•ÁöÑË∞ÉËØïÊ≠•È™§</h3>
                <div class="code-block" data-lang="bash">
# 1. ÂêØÁî®ËØ¶ÁªÜÊó•Âøó
export LOG_LEVEL=DEBUG
npm run dev

# 2. Ê£ÄÊü•ÊîØ‰ªòÊúçÂä°Áä∂ÊÄÅ
curl -X GET http://localhost:3004/api/payment/status

# 3. ÊµãËØïÊîØ‰ªòËÆ¢ÂçïÂàõÂª∫
curl -X POST http://localhost:3004/api/payment/create-order \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -d '{"orderId":"test123","amount":100,"paymentMethod":"wechat"}'

# 4. Êü•ÁúãÊúçÂä°Âô®Êó•Âøó
tail -f logs/payment.log
                    <button class="copy-btn" onclick="copyCode(this)">Â§çÂà∂</button>
                </div>

                <h3>üìû Ëé∑ÂèñÂ∏ÆÂä©</h3>
                <div class="alert alert-info">
                    <strong>üí° Â¶ÇÊûúÈóÆÈ¢ò‰ªçÊú™Ëß£ÂÜ≥</strong><br>
                    1. Êü•ÁúãÈ°πÁõÆÊñáÊ°£Ôºö<code>docs/QR_PAYMENT_SOLUTION.md</code><br>
                    2. ËøêË°åÂÆåÊï¥ÁöÑÈÖçÁΩÆÈ™åËØÅÔºö<code>npx tsx scripts/qr-payment-config-validator.ts</code><br>
                    3. Ê£ÄÊü•GitHub IssuesÊàñÊèê‰∫§Êñ∞ÁöÑÈóÆÈ¢òÊä•Âëä<br>
                    4. ËÅîÁ≥ªÊäÄÊúØÊîØÊåÅÂõ¢Èòü
                </div>

                <button class="btn btn-success" onclick="completeSetup()">üéâ ÂÆåÊàêÈÖçÁΩÆ</button>
            </div>
        </div>

        <!-- ÂÆåÊàêÈ°µÈù¢ -->
        <div id="complete" class="tab-content">
            <div class="card" style="text-align: center;">
                <h2><span style="font-size: 2em;">üéâ</span>ÈÖçÁΩÆÂÆåÊàêÔºÅ</h2>

                <div style="font-size: 1.2em; color: #27ae60; margin: 30px 0;">
                    <strong>ÊÅ≠ÂñúÔºÅÊÇ®Â∑≤ÊàêÂäüÈÖçÁΩÆÁúüÂÆûÊî∂Ê¨æÁ†Å</strong>
                </div>

                <div class="alert alert-success">
                    <strong>‚úÖ ÈÖçÁΩÆÂÆåÊàêÊ∏ÖÂçï</strong><br>
                    ‚Ä¢ Ëé∑Âèñ‰∫ÜÁúüÂÆûÁöÑÂæÆ‰ø°ÂíåÊîØ‰ªòÂÆùÊî∂Ê¨æÁ†Å<br>
                    ‚Ä¢ Êõ¥Êñ∞‰∫Ü.env.localÈÖçÁΩÆÊñá‰ª∂<br>
                    ‚Ä¢ ÈÄöËøá‰∫ÜÈÖçÁΩÆÈ™åËØÅÊµãËØï<br>
                    ‚Ä¢ ‰∫ÜËß£‰∫ÜÂÆâÂÖ®‰ΩøÁî®ËßÑËåÉ<br>
                    ‚Ä¢ ÊéåÊè°‰∫ÜÊïÖÈöúÊéíÈô§ÊñπÊ≥ï
                </div>

                <h3>üöÄ ‰∏ã‰∏ÄÊ≠•Ë°åÂä®</h3>
                <div style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin: 30px 0;">
                    <button class="btn btn-success" onclick="runFinalValidation()">
                        üîç ÊúÄÁªàÈ™åËØÅ
                    </button>
                    <button class="btn" onclick="startDevelopment()">
                        üíª ÂºÄÂßãÂºÄÂèë
                    </button>
                    <button class="btn btn-warning" onclick="viewDocumentation()">
                        üìö Êü•ÁúãÊñáÊ°£
                    </button>
                </div>

                <div class="alert alert-info">
                    <strong>üìã ËÆ∞‰ΩèË¶ÅÁÇπ</strong><br>
                    ‚Ä¢ ÂÆöÊúüÊ£ÄÊü•Êî∂Ê¨æÁ†ÅÊúâÊïàÊÄß<br>
                    ‚Ä¢ ÁõëÊéßÊîØ‰ªò‰∫§ÊòìËÆ∞ÂΩï<br>
                    ‚Ä¢ ÂèäÊó∂Â§ÑÁêÜÁî®Êà∑ÊîØ‰ªòÈ™åËØÅ<br>
                    ‚Ä¢ ÂáÜÂ§áÂçáÁ∫ßÂà∞MCPÂçèËÆÆ
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 5;

        function showTab(tabId) {
            // ÈöêËóèÊâÄÊúâÊ†áÁ≠æÂÜÖÂÆπ
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });

            // ÁßªÈô§ÊâÄÊúâÊ†áÁ≠æÁöÑactiveÁ±ª
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // ÊòæÁ§∫ÈÄâ‰∏≠ÁöÑÊ†áÁ≠æÂÜÖÂÆπ
            document.getElementById(tabId).classList.add('active');

            // Ê∑ªÂä†activeÁ±ªÂà∞ÈÄâ‰∏≠ÁöÑÊ†áÁ≠æ
            event.target.closest('.nav-tab').classList.add('active');

            // Êõ¥Êñ∞ËøõÂ∫¶
            const stepNumber = parseInt(tabId.replace('step', ''));
            updateProgress(stepNumber);
        }

        function nextStep() {
            if (currentStep < totalSteps) {
                currentStep++;
                showTab(`step${currentStep}`);

                // Êõ¥Êñ∞Ê†áÁ≠æactiveÁä∂ÊÄÅ
                document.querySelectorAll('.nav-tab').forEach((tab, index) => {
                    tab.classList.remove('active');
                    if (index === currentStep - 1) {
                        tab.classList.add('active');
                    }
                });
            } else {
                // ÊòæÁ§∫ÂÆåÊàêÈ°µÈù¢
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                document.getElementById('complete').classList.add('active');
                updateProgress(totalSteps + 1);
            }
        }

        function updateProgress(step) {
            const progress = (step / (totalSteps + 1)) * 100;
            document.getElementById('progressBar').style.width = progress + '%';

            const messages = [
                'ÂáÜÂ§áÂºÄÂßãÈÖçÁΩÆ...',
                'Ê≠£Âú®Ëé∑ÂèñÊî∂Ê¨æÁ†Å...',
                'Ê≠£Âú®ÈÖçÁΩÆÊõøÊç¢...',
                'Ê≠£Âú®ÈõÜÊàêÊµãËØï...',
                'Ê≠£Âú®Ê£ÄÊü•ÂÆâÂÖ®...',
                'Ê≠£Âú®ÊïÖÈöúÊéíÈô§...',
                'ÈÖçÁΩÆÂÆåÊàêÔºÅüéâ'
            ];

            document.getElementById('progressText').textContent = messages[step] || messages[0];
        }

        function copyCode(button) {
            const codeBlock = button.parentElement;
            const code = codeBlock.textContent.replace('Â§çÂà∂', '').trim();

            navigator.clipboard.writeText(code).then(() => {
                button.textContent = 'Â∑≤Â§çÂà∂!';
                button.style.background = '#27ae60';
                setTimeout(() => {
                    button.textContent = 'Â§çÂà∂';
                    button.style.background = '#27ae60';
                }, 2000);
            });
        }

        function updateConfig() {
            const wechatQR = document.getElementById('wechatQRInput').value;
            const wechatName = document.getElementById('wechatNameInput').value;
            const wechatAccount = document.getElementById('wechatAccountInput').value;
            const alipayQR = document.getElementById('alipayQRInput').value;
            const alipayName = document.getElementById('alipayNameInput').value;
            const alipayAccount = document.getElementById('alipayAccountInput').value;
            const maxAmount = document.getElementById('maxAmountInput').value;
            const dailyLimit = document.getElementById('dailyLimitInput').value;

            const config = `# QRÊîØ‰ªòÈÖçÁΩÆ - Êõ¥Êñ∞‰∫é ${new Date().toISOString()}
# ============================================================================
# QRÊîØ‰ªòÈÖçÁΩÆ (‰∏™‰∫∫Êî∂Ê¨æÁ†Å) - ÁúüÂÆûÊî∂Ê¨æÁ†ÅÈÖçÁΩÆ
# ============================================================================

# ÂêØÁî®QRÊîØ‰ªò
QR_PAYMENT_ENABLED=true

# ÂæÆ‰ø°‰∏™‰∫∫Êî∂Ê¨æÁ†ÅÈÖçÁΩÆ
WECHAT_PERSONAL_QR_ENABLED=true
WECHAT_PERSONAL_QR_CODE=${wechatQR || 'your_wechat_personal_qr_code_data'}
WECHAT_PAYEE_NAME=${wechatName}
WECHAT_PAYEE_ACCOUNT=${wechatAccount}
WECHAT_PAYEE_AVATAR=https://example.com/wechat-avatar.jpg
WECHAT_PERSONAL_MAX_AMOUNT=${maxAmount * 100}
WECHAT_PERSONAL_DAILY_LIMIT=${dailyLimit * 100}

# ÊîØ‰ªòÂÆù‰∏™‰∫∫Êî∂Ê¨æÁ†ÅÈÖçÁΩÆ
ALIPAY_PERSONAL_QR_ENABLED=true
ALIPAY_PERSONAL_QR_CODE=${alipayQR || 'your_alipay_personal_qr_code_data'}
ALIPAY_PAYEE_NAME=${alipayName}
ALIPAY_PAYEE_ACCOUNT=${alipayAccount}
ALIPAY_PAYEE_AVATAR=https://example.com/alipay-avatar.jpg
ALIPAY_PERSONAL_MAX_AMOUNT=${maxAmount * 100}
ALIPAY_PERSONAL_DAILY_LIMIT=${dailyLimit * 100}`;

            document.getElementById('generatedConfig').textContent = config;
        }

        function copyGeneratedConfig() {
            const config = document.getElementById('generatedConfig').textContent;
            navigator.clipboard.writeText(config).then(() => {
                alert('‚úÖ ÈÖçÁΩÆÂ∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥ÊùøÔºÅ\n\nËØ∑ÊâìÂºÄ .env.local Êñá‰ª∂ÔºåÊâæÂà∞QRÊîØ‰ªòÈÖçÁΩÆÈÉ®ÂàÜÔºåÊõøÊç¢Áõ∏Â∫îÁöÑÈÖçÁΩÆÈ°π„ÄÇ');
            });
        }

        function validateConfig() {
            const wechatQR = document.getElementById('wechatQRInput').value;
            const alipayQR = document.getElementById('alipayQRInput').value;

            const validation = document.getElementById('configValidation');
            validation.classList.add('show');

            let isValid = true;
            let message = '<h4>üîç ÈÖçÁΩÆÈ™åËØÅÁªìÊûú</h4>';

            if (!wechatQR || wechatQR.includes('example')) {
                message += '<p>‚ùå ÂæÆ‰ø°Êî∂Ê¨æÁ†Å‰ªç‰ΩøÁî®Á§∫‰æãÊï∞ÊçÆ</p>';
                isValid = false;
            } else if (wechatQR.startsWith('wxp://') || wechatQR.startsWith('weixin://')) {
                message += '<p>‚úÖ ÂæÆ‰ø°Êî∂Ê¨æÁ†ÅÊ†ºÂºèÊ≠£Á°Æ</p>';
            } else {
                message += '<p>‚ö†Ô∏è ÂæÆ‰ø°Êî∂Ê¨æÁ†ÅÊ†ºÂºèÂèØËÉΩ‰∏çÊ≠£Á°Æ</p>';
            }

            if (!alipayQR || alipayQR.includes('example')) {
                message += '<p>‚ùå ÊîØ‰ªòÂÆùÊî∂Ê¨æÁ†Å‰ªç‰ΩøÁî®Á§∫‰æãÊï∞ÊçÆ</p>';
                isValid = false;
            } else if (alipayQR.startsWith('https://qr.alipay.com/') || alipayQR.startsWith('alipays://')) {
                message += '<p>‚úÖ ÊîØ‰ªòÂÆùÊî∂Ê¨æÁ†ÅÊ†ºÂºèÊ≠£Á°Æ</p>';
            } else {
                message += '<p>‚ö†Ô∏è ÊîØ‰ªòÂÆùÊî∂Ê¨æÁ†ÅÊ†ºÂºèÂèØËÉΩ‰∏çÊ≠£Á°Æ</p>';
            }

            if (isValid) {
                validation.className = 'validation-result show alert alert-success';
                message += '<p><strong>üéâ ÈÖçÁΩÆÈ™åËØÅÈÄöËøáÔºÅÂèØ‰ª•ËøõË°å‰∏ã‰∏ÄÊ≠•ÊµãËØï„ÄÇ</strong></p>';
            } else {
                validation.className = 'validation-result show alert alert-warning';
                message += '<p><strong>‚ö†Ô∏è ËØ∑ÂÆåÂñÑÈÖçÁΩÆÂêéÂÜçËøõË°åÊµãËØï„ÄÇ</strong></p>';
            }

            validation.innerHTML = message;
        }

        function previewQR(input, type) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    // ËøôÈáåÂèØ‰ª•Ê∑ªÂä†‰∫åÁª¥Á†ÅËß£ÊûêÈÄªËæë
                    // ÁõÆÂâçÂè™ÊòØÊòæÁ§∫ÊèêÁ§∫‰ø°ÊÅØ
                    const dataDiv = document.getElementById(type + 'QRData');
                    dataDiv.innerHTML = `<small>Â∑≤ÈÄâÊã©Êñá‰ª∂: ${file.name}<br>ËØ∑‰ΩøÁî®‰∫åÁª¥Á†ÅËß£ÊûêÂ∑•ÂÖ∑Ëé∑ÂèñÊï∞ÊçÆ</small>`;
                };
                reader.readAsDataURL(file);
            }
        }

        function runAllTests() {
            alert('üß™ ÊµãËØïÊåáÂçóÔºö\n\n1. È¶ñÂÖàËøêË°åÔºönpx tsx scripts/qr-payment-config-validator.ts\n2. ÁÑ∂ÂêéËøêË°åÔºönpx tsx scripts/jwt-production-check.ts\n3. ÊúÄÂêéËøêË°åÔºönpx playwright test tests/e2e/qr-payment-flow.spec.ts\n\nËØ∑Âú®ÁªàÁ´Ø‰∏≠‰æùÊ¨°ÊâßË°åËøô‰∫õÂëΩ‰ª§„ÄÇ');
        }

        function completeSetup() {
            nextStep(); // ÊòæÁ§∫ÂÆåÊàêÈ°µÈù¢
        }

        function runFinalValidation() {
            alert('üîç ÊúÄÁªàÈ™åËØÅÔºö\n\nËØ∑Âú®ÁªàÁ´Ø‰∏≠ËøêË°åÔºö\nnpx tsx scripts/qr-payment-config-validator.ts\n\nÁ°Æ‰øùÈÖçÁΩÆÂ∞±Áª™Â∫¶ËææÂà∞90%‰ª•‰∏ä„ÄÇ');
        }

        function startDevelopment() {
            alert('üíª ÂºÄÂßãÂºÄÂèëÔºö\n\n1. ËøêË°åÔºönpm run dev\n2. ËÆøÈóÆÔºöhttp://localhost:3004\n3. ÊµãËØïÊîØ‰ªòÂäüËÉΩ\n\nÁ•ùÊÇ®ÂºÄÂèëÈ°∫Âà©ÔºÅ');
        }

        function viewDocumentation() {
            alert('üìö Áõ∏ÂÖ≥ÊñáÊ°£Ôºö\n\n‚Ä¢ QRÊîØ‰ªòËß£ÂÜ≥ÊñπÊ°àÔºödocs/QR_PAYMENT_SOLUTION.md\n‚Ä¢ ‰øÆÂ§çÊä•ÂëäÔºödocs/QR_PAYMENT_FIX_REPORT.md\n‚Ä¢ ÂÆûÊñΩÊåáÂçóÔºödocs/qr-payment-implementation-guide.html');
        }

        // ÂàùÂßãÂåñ
        updateProgress(1);
        updateConfig();
    </script>
</body>
</html>