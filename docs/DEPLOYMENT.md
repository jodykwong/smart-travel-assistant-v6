# Êô∫Ê∏∏Âä©Êâãv6.0 - ÈÉ®ÁΩ≤ÊåáÂçó

## üìã ÁõÆÂΩï

- [1. ÈÉ®ÁΩ≤Ê¶ÇËø∞](#1-ÈÉ®ÁΩ≤Ê¶ÇËø∞)
- [2. ÁéØÂ¢ÉÂáÜÂ§á](#2-ÁéØÂ¢ÉÂáÜÂ§á)
- [3. Êú¨Âú∞ÂºÄÂèëÈÉ®ÁΩ≤](#3-Êú¨Âú∞ÂºÄÂèëÈÉ®ÁΩ≤)
- [4. DockerÈÉ®ÁΩ≤](#4-dockerÈÉ®ÁΩ≤)
- [5. Áîü‰∫ßÁéØÂ¢ÉÈÉ®ÁΩ≤](#5-Áîü‰∫ßÁéØÂ¢ÉÈÉ®ÁΩ≤)
- [6. KubernetesÈÉ®ÁΩ≤](#6-kubernetesÈÉ®ÁΩ≤)
- [7. ÁõëÊéßÂíåÁª¥Êä§](#7-ÁõëÊéßÂíåÁª¥Êä§)
- [8. ÊïÖÈöúÊéíÈô§](#8-ÊïÖÈöúÊéíÈô§)

---

## 1. ÈÉ®ÁΩ≤Ê¶ÇËø∞

### 1.1 ÈÉ®ÁΩ≤Êû∂ÊûÑ

Êô∫Ê∏∏Âä©Êâãv6.0ÊîØÊåÅÂ§öÁßçÈÉ®ÁΩ≤ÊñπÂºèÔºåÂü∫‰∫é**‰∏∫Â§±Ë¥•ËÄåËÆæËÆ°**ÁöÑÂéüÂàôÔºåÊèê‰æõÈ´òÂèØÁî®ÁöÑÈÉ®ÁΩ≤ÊñπÊ°àÔºö

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        Ë¥üËΩΩÂùáË°°Â±Ç                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Nginx/HAProxy  ‚îÇ  CDN  ‚îÇ  SSLÁªàÁ´Ø  ‚îÇ  DDoSÈò≤Êä§            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        Â∫îÁî®ÊúçÂä°Â±Ç                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  App Instance 1  ‚îÇ  App Instance 2  ‚îÇ  App Instance 3      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        Êï∞ÊçÆÊúçÂä°Â±Ç                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Redis Cluster  ‚îÇ  SQLite DB  ‚îÇ  File Storage              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 1.2 ÈÉ®ÁΩ≤ÈÄâÈ°π

| ÈÉ®ÁΩ≤ÊñπÂºè | ÈÄÇÁî®Âú∫ÊôØ | Â§çÊùÇÂ∫¶ | ÂèØÊâ©Â±ïÊÄß | Êé®ËçêÊåáÊï∞ |
|----------|----------|--------|----------|----------|
| Êú¨Âú∞ÂºÄÂèë | ÂºÄÂèëÊµãËØï | ‚≠ê | ‚≠ê | ÂºÄÂèëÁéØÂ¢É |
| DockerÂçïÊú∫ | Â∞èÂûãÈÉ®ÁΩ≤ | ‚≠ê‚≠ê | ‚≠ê‚≠ê | ‰∏™‰∫∫È°πÁõÆ |
| Docker Compose | ‰∏≠ÂûãÈÉ®ÁΩ≤ | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‰∏≠Â∞è‰ºÅ‰∏ö |
| Kubernetes | ‰ºÅ‰∏öÁ∫ß | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | Â§ßÂûã‰ºÅ‰∏ö |

---

## 2. ÁéØÂ¢ÉÂáÜÂ§á

### 2.1 Á≥ªÁªüË¶ÅÊ±Ç

#### ÊúÄ‰ΩéÈÖçÁΩÆ
- **CPU**: 2Ê†∏ÂøÉ
- **ÂÜÖÂ≠ò**: 4GB RAM
- **Â≠òÂÇ®**: 20GB SSD
- **ÁΩëÁªú**: 10MbpsÂ∏¶ÂÆΩ

#### Êé®ËçêÈÖçÁΩÆ
- **CPU**: 4Ê†∏ÂøÉ‰ª•‰∏ä
- **ÂÜÖÂ≠ò**: 8GB RAM‰ª•‰∏ä
- **Â≠òÂÇ®**: 50GB SSD‰ª•‰∏ä
- **ÁΩëÁªú**: 100MbpsÂ∏¶ÂÆΩ‰ª•‰∏ä

### 2.2 ËΩØ‰ª∂‰æùËµñ

#### ÂøÖÈúÄËΩØ‰ª∂
```bash
# Node.js (Êé®Ëçê‰ΩøÁî®nvmÁÆ°ÁêÜ)
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 20
nvm use 20

# Python 3.8+
sudo apt-get install python3 python3-pip

# Redis (ÂèØÈÄâÔºåÁî®‰∫éÁîü‰∫ßÁéØÂ¢ÉÁºìÂ≠ò)
sudo apt-get install redis-server

# Docker (Áî®‰∫éÂÆπÂô®ÂåñÈÉ®ÁΩ≤)
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
```

#### ÂèØÈÄâËΩØ‰ª∂
```bash
# PM2 (ËøõÁ®ãÁÆ°ÁêÜ)
npm install -g pm2

# Nginx (ÂèçÂêë‰ª£ÁêÜ)
sudo apt-get install nginx

# Certbot (SSLËØÅ‰π¶)
sudo apt-get install certbot python3-certbot-nginx
```

---

## 3. Êú¨Âú∞ÂºÄÂèëÈÉ®ÁΩ≤

### 3.1 Âø´ÈÄüÂêØÂä®

```bash
# 1. ÂÖãÈöÜÈ°πÁõÆ
git clone https://github.com/your-repo/smart-travel-assistant-v6.git
cd smart-travel-assistant-v6.0

# 2. ÂÆâË£Ö‰æùËµñ
npm install
pip3 install python-dotenv openai tiktoken

# 3. ÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáè
cp .env.example .env
# ÁºñËæë .env Êñá‰ª∂ÔºåÈÖçÁΩÆÂøÖË¶ÅÁöÑAPIÂØÜÈí•

# 4. ÂêØÂä®ÂºÄÂèëÊúçÂä°Âô®
npm run dev
```

### 3.2 ÁéØÂ¢ÉÈÖçÁΩÆ

ÂàõÂª∫ `.env` Êñá‰ª∂Ôºö

```env
# === Â∫îÁî®ÈÖçÁΩÆ ===
NODE_ENV=development
NEXT_PUBLIC_APP_URL=http://localhost:3001
PORT=3001

# === APIÂØÜÈí• ===
DEEPSEEK_API_KEY=sk-your-deepseek-key
DEEPSEEK_BASE_URL=https://api.deepseek.com
AMAP_MCP_API_KEY=your-amap-key

# === Êï∞ÊçÆÂ∫ìÈÖçÁΩÆ ===
DATABASE_URL=file:./dev.db
DATABASE_TYPE=sqlite
DATABASE_TIMEOUT=10000

# === ÁºìÂ≠òÈÖçÁΩÆ ===
CACHE_ENABLED=false
REDIS_URL=redis://localhost:6379

# === ËÆ§ËØÅÈÖçÁΩÆ ===
JWT_SECRET=your-development-jwt-secret
JWT_EXPIRES_IN=7d
NEXTAUTH_URL=http://localhost:3001
NEXTAUTH_SECRET=your-nextauth-secret

# === Êó•ÂøóÈÖçÁΩÆ ===
LOG_LEVEL=debug
```

### 3.3 ÂºÄÂèëÂ∑•ÂÖ∑

```bash
# ‰ª£Á†ÅÊ†ºÂºèÂåñ
npm run format

# ‰ª£Á†ÅÊ£ÄÊü•
npm run lint

# Á±ªÂûãÊ£ÄÊü•
npm run type-check

# ËøêË°åÊµãËØï
npm run test:e2e
```

---

## 4. DockerÈÉ®ÁΩ≤

### 4.1 ÂçïÂÆπÂô®ÈÉ®ÁΩ≤

#### Dockerfile
```dockerfile
# Â§öÈò∂ÊÆµÊûÑÂª∫
FROM node:20-alpine AS builder

WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

COPY . .
RUN npm run build

# Áîü‰∫ßÈïúÂÉè
FROM node:20-alpine AS runner

WORKDIR /app

# ÂÆâË£ÖPython‰æùËµñ
RUN apk add --no-cache python3 py3-pip
RUN pip3 install python-dotenv openai tiktoken

# Â§çÂà∂ÊûÑÂª∫‰∫ßÁâ©
COPY --from=builder /app/next.config.js ./
COPY --from=builder /app/public ./public
COPY --from=builder /app/.next/standalone ./
COPY --from=builder /app/.next/static ./.next/static

# ÂàõÂª∫ÈùûrootÁî®Êà∑
RUN addgroup --system --gid 1001 nodejs
RUN adduser --system --uid 1001 nextjs
USER nextjs

EXPOSE 3001
ENV PORT 3001
ENV HOSTNAME "0.0.0.0"

CMD ["node", "server.js"]
```

#### ÊûÑÂª∫ÂíåËøêË°å
```bash
# ÊûÑÂª∫ÈïúÂÉè
docker build -t smart-travel-assistant:v6.0 .

# ËøêË°åÂÆπÂô®
docker run -d \
  --name smart-travel-app \
  -p 3001:3001 \
  -e NODE_ENV=production \
  -e DEEPSEEK_API_KEY=your-key \
  -e AMAP_MCP_API_KEY=your-key \
  -v $(pwd)/data:/app/data \
  smart-travel-assistant:v6.0
```

### 4.2 Docker ComposeÈÉ®ÁΩ≤

#### docker-compose.yml
```yaml
version: '3.8'

services:
  app:
    build: .
    ports:
      - "3001:3001"
    environment:
      - NODE_ENV=production
      - DATABASE_URL=file:./data/production.db
      - REDIS_URL=redis://redis:6379
      - CACHE_ENABLED=true
    env_file:
      - .env.production
    volumes:
      - ./data:/app/data
      - ./logs:/app/logs
    depends_on:
      - redis
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3001/api/health"]
      interval: 30s
      timeout: 10s
      retries: 3

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    command: redis-server --appendonly yes
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 30s
      timeout: 10s
      retries: 3

  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ./ssl:/etc/nginx/ssl
    depends_on:
      - app
    restart: unless-stopped

volumes:
  redis_data:
```

#### ÂêØÂä®ÊúçÂä°
```bash
# ÂêØÂä®ÊâÄÊúâÊúçÂä°
docker-compose up -d

# Êü•ÁúãÊó•Âøó
docker-compose logs -f

# ÂÅúÊ≠¢ÊúçÂä°
docker-compose down
```

---

## 5. Áîü‰∫ßÁéØÂ¢ÉÈÉ®ÁΩ≤

### 5.1 ÊúçÂä°Âô®ÈÖçÁΩÆ

#### Á≥ªÁªü‰ºòÂåñ
```bash
# Â¢ûÂä†Êñá‰ª∂ÊèèËø∞Á¨¶ÈôêÂà∂
echo "* soft nofile 65535" >> /etc/security/limits.conf
echo "* hard nofile 65535" >> /etc/security/limits.conf

# ‰ºòÂåñÂÜÖÊ†∏ÂèÇÊï∞
echo "net.core.somaxconn = 65535" >> /etc/sysctl.conf
echo "net.ipv4.tcp_max_syn_backlog = 65535" >> /etc/sysctl.conf
sysctl -p

# ÈÖçÁΩÆÈò≤ÁÅ´Â¢ô
ufw allow 22    # SSH
ufw allow 80    # HTTP
ufw allow 443   # HTTPS
ufw enable
```

#### NginxÈÖçÁΩÆ
```nginx
# /etc/nginx/sites-available/smart-travel
upstream app_servers {
    server 127.0.0.1:3001;
    server 127.0.0.1:3002;
    server 127.0.0.1:3003;
}

server {
    listen 80;
    server_name your-domain.com;
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name your-domain.com;

    ssl_certificate /etc/letsencrypt/live/your-domain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/your-domain.com/privkey.pem;

    # SSLÈÖçÁΩÆ
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512;
    ssl_prefer_server_ciphers off;

    # ÂÆâÂÖ®Â§¥
    add_header X-Frame-Options DENY;
    add_header X-Content-Type-Options nosniff;
    add_header X-XSS-Protection "1; mode=block";

    # ÂéãÁº©
    gzip on;
    gzip_types text/plain text/css application/json application/javascript;

    location / {
        proxy_pass http://app_servers;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
```

### 5.2 PM2ÈÉ®ÁΩ≤

#### ecosystem.config.js
```javascript
module.exports = {
  apps: [{
    name: 'smart-travel-assistant',
    script: 'npm',
    args: 'start',
    instances: 'max',
    exec_mode: 'cluster',
    env: {
      NODE_ENV: 'production',
      PORT: 3001
    },
    env_production: {
      NODE_ENV: 'production',
      PORT: 3001
    },
    log_file: './logs/combined.log',
    out_file: './logs/out.log',
    error_file: './logs/error.log',
    log_date_format: 'YYYY-MM-DD HH:mm:ss Z',
    merge_logs: true,
    max_memory_restart: '1G',
    node_args: '--max-old-space-size=4096'
  }]
};
```

#### ÈÉ®ÁΩ≤ÂëΩ‰ª§
```bash
# ÊûÑÂª∫È°πÁõÆ
npm run build

# ÂêØÂä®PM2
pm2 start ecosystem.config.js --env production

# ‰øùÂ≠òPM2ÈÖçÁΩÆ
pm2 save
pm2 startup

# ÁõëÊéß
pm2 monit
```

---

## 6. KubernetesÈÉ®ÁΩ≤

### 6.1 Âü∫Á°ÄÈÖçÁΩÆ

#### Namespace
```yaml
# k8s/namespace.yaml
apiVersion: v1
kind: Namespace
metadata:
  name: smart-travel
```

#### ConfigMap
```yaml
# k8s/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
  namespace: smart-travel
data:
  NODE_ENV: "production"
  DATABASE_TYPE: "sqlite"
  CACHE_ENABLED: "true"
  LOG_LEVEL: "info"
```

#### Secret
```yaml
# k8s/secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: app-secrets
  namespace: smart-travel
type: Opaque
data:
  DEEPSEEK_API_KEY: <base64-encoded-key>
  AMAP_MCP_API_KEY: <base64-encoded-key>
  JWT_SECRET: <base64-encoded-secret>
```

### 6.2 Â∫îÁî®ÈÉ®ÁΩ≤

#### Deployment
```yaml
# k8s/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: smart-travel-app
  namespace: smart-travel
spec:
  replicas: 3
  selector:
    matchLabels:
      app: smart-travel-app
  template:
    metadata:
      labels:
        app: smart-travel-app
    spec:
      containers:
      - name: app
        image: smart-travel-assistant:v6.0
        ports:
        - containerPort: 3001
        env:
        - name: PORT
          value: "3001"
        envFrom:
        - configMapRef:
            name: app-config
        - secretRef:
            name: app-secrets
        resources:
          requests:
            memory: "256Mi"
            cpu: "250m"
          limits:
            memory: "512Mi"
            cpu: "500m"
        livenessProbe:
          httpGet:
            path: /api/health
            port: 3001
          initialDelaySeconds: 30
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /api/health
            port: 3001
          initialDelaySeconds: 5
          periodSeconds: 5
        volumeMounts:
        - name: data-volume
          mountPath: /app/data
      volumes:
      - name: data-volume
        persistentVolumeClaim:
          claimName: app-data-pvc
```

#### Service
```yaml
# k8s/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: smart-travel-service
  namespace: smart-travel
spec:
  selector:
    app: smart-travel-app
  ports:
  - protocol: TCP
    port: 80
    targetPort: 3001
  type: ClusterIP
```

#### Ingress
```yaml
# k8s/ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: smart-travel-ingress
  namespace: smart-travel
  annotations:
    kubernetes.io/ingress.class: nginx
    cert-manager.io/cluster-issuer: letsencrypt-prod
spec:
  tls:
  - hosts:
    - your-domain.com
    secretName: smart-travel-tls
  rules:
  - host: your-domain.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: smart-travel-service
            port:
              number: 80
```

### 6.3 ÈÉ®ÁΩ≤ÂëΩ‰ª§

```bash
# Â∫îÁî®ÊâÄÊúâÈÖçÁΩÆ
kubectl apply -f k8s/

# Êü•ÁúãÈÉ®ÁΩ≤Áä∂ÊÄÅ
kubectl get pods -n smart-travel

# Êü•ÁúãÊó•Âøó
kubectl logs -f deployment/smart-travel-app -n smart-travel

# Êâ©ÂÆπ
kubectl scale deployment smart-travel-app --replicas=5 -n smart-travel
```

---

## 7. ÁõëÊéßÂíåÁª¥Êä§

### 7.1 ÂÅ•Â∫∑Ê£ÄÊü•

```bash
# Â∫îÁî®ÂÅ•Â∫∑Ê£ÄÊü•
curl -f http://localhost:3001/api/health

# ÁºìÂ≠òÁä∂ÊÄÅÊ£ÄÊü•
curl -f http://localhost:3001/api/cache/stats

# Á≥ªÁªüËµÑÊ∫êÁõëÊéß
htop
iostat -x 1
```

### 7.2 Êó•ÂøóÁÆ°ÁêÜ

```bash
# PM2Êó•Âøó
pm2 logs smart-travel-assistant

# DockerÊó•Âøó
docker logs -f smart-travel-app

# Á≥ªÁªüÊó•Âøó
tail -f /var/log/nginx/access.log
tail -f /var/log/nginx/error.log
```

### 7.3 Â§á‰ªΩÁ≠ñÁï•

```bash
#!/bin/bash
# backup.sh - Êï∞ÊçÆÂ§á‰ªΩËÑöÊú¨

DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_DIR="/backup/smart-travel"

# Â§á‰ªΩÊï∞ÊçÆÂ∫ì
cp ./data/production.db $BACKUP_DIR/db_backup_$DATE.db

# Â§á‰ªΩÈÖçÁΩÆÊñá‰ª∂
tar -czf $BACKUP_DIR/config_backup_$DATE.tar.gz .env* *.config.js

# Ê∏ÖÁêÜÊóßÂ§á‰ªΩÔºà‰øùÁïô30Â§©Ôºâ
find $BACKUP_DIR -name "*.db" -mtime +30 -delete
find $BACKUP_DIR -name "*.tar.gz" -mtime +30 -delete

echo "Â§á‰ªΩÂÆåÊàê: $DATE"
```

---

## 8. ÊïÖÈöúÊéíÈô§

### 8.1 Â∏∏ËßÅÈóÆÈ¢ò

#### Â∫îÁî®Êó†Ê≥ïÂêØÂä®
```bash
# Ê£ÄÊü•Á´ØÂè£Âç†Áî®
netstat -tlnp | grep 3001

# Ê£ÄÊü•ÁéØÂ¢ÉÂèòÈáè
printenv | grep -E "(DEEPSEEK|AMAP)"

# Ê£ÄÊü•‰æùËµñ
npm ls
pip3 list
```

#### ÊÄßËÉΩÈóÆÈ¢ò
```bash
# Ê£ÄÊü•ÂÜÖÂ≠ò‰ΩøÁî®
free -h
ps aux --sort=-%mem | head

# Ê£ÄÊü•CPU‰ΩøÁî®
top -p $(pgrep -f "node")

# Ê£ÄÊü•Á£ÅÁõòIO
iotop -o
```

#### ÁºìÂ≠òÈóÆÈ¢ò
```bash
# Ê£ÄÊü•RedisËøûÊé•
redis-cli ping

# Ê∏ÖÁêÜÁºìÂ≠ò
redis-cli flushall

# Ê£ÄÊü•ÁºìÂ≠òÁªüËÆ°
curl http://localhost:3001/api/cache/stats
```

### 8.2 Â∫îÊÄ•Â§ÑÁêÜ

#### ÊúçÂä°ÈáçÂêØ
```bash
# PM2ÈáçÂêØ
pm2 restart smart-travel-assistant

# DockerÈáçÂêØ
docker-compose restart app

# KubernetesÈáçÂêØ
kubectl rollout restart deployment/smart-travel-app -n smart-travel
```

#### ÂõûÊªöÈÉ®ÁΩ≤
```bash
# PM2ÂõûÊªö
pm2 stop smart-travel-assistant
git checkout previous-version
npm run build
pm2 start ecosystem.config.js

# KubernetesÂõûÊªö
kubectl rollout undo deployment/smart-travel-app -n smart-travel
```

---

**ÈÉ®ÁΩ≤ÊåáÂçóÁâàÊú¨**: v6.0.0  
**ÊúÄÂêéÊõ¥Êñ∞**: 2025Âπ¥8Êúà2Êó•  
**Áª¥Êä§Âõ¢Èòü**: Êô∫Ê∏∏Âä©ÊâãDevOpsÂõ¢Èòü
