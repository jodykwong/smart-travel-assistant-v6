# Phase 3A 开发环境配置文件
# 复制此文件为 .env.phase3a 并填入实际配置值

# ============= 基础配置 =============
NODE_ENV=development
PORT=3000
API_VERSION=v1

# ============= 数据库配置 =============
# 开发环境数据库
DB_HOST=localhost
DB_PORT=3306
DB_USERNAME=smart_travel_dev
DB_PASSWORD=dev_password_123
DB_DATABASE=smart_travel_dev

# 测试环境数据库
TEST_DB_HOST=localhost
TEST_DB_PORT=3306
TEST_DB_USERNAME=smart_travel_test
TEST_DB_PASSWORD=test_password_123
TEST_DB_DATABASE=smart_travel_test

# 生产环境数据库 (仅生产环境需要)
PROD_DB_HOST=prod-db.smarttravel.com
PROD_DB_PORT=3306
PROD_DB_USERNAME=smart_travel_prod
PROD_DB_PASSWORD=
PROD_DB_DATABASE=smart_travel_prod

# ============= 安全配置 =============
# 加密密钥 (32字符，生产环境必须更换)
ENCRYPTION_KEY=dev_encryption_key_32_characters

# JWT密钥 (生产环境必须更换)
JWT_SECRET=dev_jwt_secret_for_development_only

# 会话配置
SESSION_SECRET=dev_session_secret_for_development
SESSION_TIMEOUT=3600

# ============= 支付配置 =============
# 微信支付配置
WECHAT_APP_ID=wx_test_app_id
WECHAT_MCH_ID=test_mch_id
WECHAT_API_KEY=test_api_key_32_characters_long
WECHAT_API_URL=https://api.mch.weixin.qq.com
WECHAT_CERT_PATH=./certs/wechat/apiclient_cert.pem
WECHAT_KEY_PATH=./certs/wechat/apiclient_key.pem

# 支付宝配置
ALIPAY_APP_ID=test_app_id
ALIPAY_MERCHANT_ID=test_merchant_id
ALIPAY_PRIVATE_KEY=test_private_key
ALIPAY_PUBLIC_KEY=test_public_key
ALIPAY_ALIPAY_PUBLIC_KEY=alipay_public_key
ALIPAY_API_URL=https://openapi.alipaydev.com/gateway.do

# ============= 回调配置 =============
# 回调基础URL
CALLBACK_BASE_URL=http://localhost:3000

# 支付回调URL
WECHAT_CALLBACK_URL=http://localhost:3000/api/v1/payments/wechat/callback
ALIPAY_CALLBACK_URL=http://localhost:3000/api/v1/payments/alipay/callback

# 支付成功跳转URL
PAYMENT_SUCCESS_URL=http://localhost:3000/payment/success
PAYMENT_FAILURE_URL=http://localhost:3000/payment/failure

# ============= 缓存配置 =============
# Redis配置
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# 缓存TTL配置 (秒)
CACHE_USER_SESSION_TTL=3600
CACHE_PAYMENT_ORDER_TTL=1800
CACHE_GEO_DATA_TTL=86400

# ============= 日志配置 =============
# 日志级别
LOG_LEVEL=debug

# 日志文件路径
LOG_FILE_PATH=./logs/smart-travel.log
ERROR_LOG_FILE_PATH=./logs/error.log
AUDIT_LOG_FILE_PATH=./logs/audit.log

# 控制台日志
ENABLE_CONSOLE_LOGGING=true

# ============= 测试配置 =============
# 支付测试模式
PAYMENT_TEST_MODE=true
MOCK_PAYMENTS=true
MOCK_CALLBACKS=true

# 安全测试
ENABLE_SECURITY_TESTS=true

# 测试数据库自动重置
AUTO_RESET_TEST_DB=true

# ============= 监控配置 =============
# 健康检查配置
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# 性能监控
ENABLE_PERFORMANCE_MONITORING=true
SLOW_QUERY_THRESHOLD=1000

# 错误监控
ENABLE_ERROR_TRACKING=true
ERROR_NOTIFICATION_WEBHOOK=

# ============= 外部服务配置 =============
# LLM API配置 (用于MCP调用)
LLM_API_KEY=your_llm_api_key_here
LLM_API_URL=https://api.openai.com/v1
LLM_MODEL=gpt-3.5-turbo

# 地图服务配置 (Phase 1)
AMAP_API_KEY=your_amap_api_key
TENCENT_MAP_API_KEY=your_tencent_map_api_key

# ============= 邮件配置 =============
# SMTP配置
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password
SMTP_FROM=Smart Travel <noreply@smarttravel.com>

# ============= 文件存储配置 =============
# 本地存储
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10485760

# 云存储 (可选)
CLOUD_STORAGE_PROVIDER=local
AWS_S3_BUCKET=
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=

# ============= 安全策略配置 =============
# 密码策略
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL_CHARS=true

# 登录安全
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION=900
ENABLE_2FA=false

# API限流
RATE_LIMIT_WINDOW=60000
RATE_LIMIT_MAX_REQUESTS=100

# ============= 开发工具配置 =============
# 热重载
ENABLE_HOT_RELOAD=true

# 调试模式
DEBUG_MODE=true
VERBOSE_LOGGING=true

# API文档
ENABLE_API_DOCS=true
API_DOCS_PATH=/api/docs

# ============= 备份配置 =============
# 数据库备份
ENABLE_AUTO_BACKUP=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_LOCATION=./backups

# ============= 通知配置 =============
# 系统通知
ENABLE_SYSTEM_NOTIFICATIONS=true
NOTIFICATION_WEBHOOK_URL=

# 用户通知
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_SMS_NOTIFICATIONS=false
SMS_PROVIDER=
SMS_API_KEY=

# ============= 特性开关 =============
# Phase 3A 功能开关
ENABLE_USER_MANAGEMENT=true
ENABLE_PAYMENT_SYSTEM=true
ENABLE_ORDER_MANAGEMENT=true
ENABLE_AUDIT_LOGGING=true

# 实验性功能
ENABLE_EXPERIMENTAL_FEATURES=false
ENABLE_BETA_FEATURES=false

# ============= 性能配置 =============
# 数据库连接池
DB_CONNECTION_LIMIT=10
DB_ACQUIRE_TIMEOUT=60000
DB_TIMEOUT=60000

# 服务器配置
SERVER_TIMEOUT=30000
KEEP_ALIVE_TIMEOUT=5000

# 内存限制
NODE_OPTIONS=--max-old-space-size=4096

# ============= 开发环境特定配置 =============
# 开发服务器
DEV_SERVER_HOST=localhost
DEV_SERVER_PORT=3000
DEV_SERVER_HTTPS=false

# 开发数据库
DEV_DB_RESET_ON_START=false
DEV_SEED_DATA=true

# 开发工具
ENABLE_DEV_TOOLS=true
ENABLE_MOCK_SERVICES=true
