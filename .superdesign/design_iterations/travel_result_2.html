<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—…è¡Œè§„åˆ’ç»“æœ - æ™ºæ¸¸åŠ©æ‰‹v6.5</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'brand-primary': '#007AFF',
                        'brand-secondary': '#5856D6',
                        'surface': '#FFFFFF',
                        'surface-variant': '#F2F2F7',
                        'on-surface': '#1C1C1E',
                        'on-surface-variant': '#8E8E93',
                        'outline': '#C6C6C8',
                        'success': '#34C759',
                        'warning': '#FF9500',
                        'error': '#FF3B30'
                    },
                    spacing: {
                        '4': '16px',
                        '8': '32px',
                        '12': '48px',
                        '16': '64px',
                        '20': '80px',
                        '24': '96px'
                    }
                }
            }
        }
    </script>
    <style>
        .timeline-line {
            background: linear-gradient(to bottom, #007AFF 0%, #5856D6 100%);
        }
        .timeline-dot {
            box-shadow: 0 0 0 4px #FFFFFF, 0 0 0 8px #007AFF20;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-surface via-surface-variant to-surface min-h-screen">
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <nav class="bg-surface/80 backdrop-blur-xl border-b border-outline/50 sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <button onclick="goBack()" class="flex items-center gap-2 px-4 py-2 rounded-xl border border-outline/50 text-on-surface hover:bg-surface-variant/50 transition-all duration-300">
                        <i class="fas fa-arrow-left"></i>
                        <span>è¿”å›</span>
                    </button>
                    <div>
                        <h1 id="planTitle" class="text-2xl font-bold text-on-surface">åŠ è½½ä¸­...</h1>
                        <p id="planSubtitle" class="text-sm text-on-surface-variant">æ­£åœ¨è·å–è¡Œç¨‹ä¿¡æ¯</p>
                    </div>
                </div>
                <div class="flex items-center gap-3">
                    <button class="p-3 rounded-xl hover:bg-surface-variant/50 transition-all duration-300" title="åˆ†äº«è¡Œç¨‹">
                        <i class="fas fa-share-alt text-on-surface-variant"></i>
                    </button>
                    <button class="p-3 rounded-xl hover:bg-surface-variant/50 transition-all duration-300" title="æ”¶è—è¡Œç¨‹">
                        <i class="fas fa-heart text-on-surface-variant"></i>
                    </button>
                    <button class="flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-brand-primary to-brand-secondary text-white rounded-xl hover:shadow-lg transition-all duration-300">
                        <i class="fas fa-download"></i>
                        <span>å¯¼å‡ºè¡Œç¨‹</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <div class="max-w-6xl mx-auto px-4 py-8">
        <!-- åŠ è½½çŠ¶æ€ -->
        <div id="loadingState" class="flex items-center justify-center py-20">
            <div class="bg-surface/80 backdrop-blur-xl rounded-3xl p-8 shadow-2xl text-center border border-outline/20">
                <div class="animate-spin rounded-full h-16 w-16 border-4 border-brand-primary/20 border-t-brand-primary mx-auto mb-6"></div>
                <h3 class="text-xl font-semibold text-on-surface mb-2">æ­£åœ¨åŠ è½½æ‚¨çš„ä¸“å±è¡Œç¨‹</h3>
                <p class="text-on-surface-variant">è¯·ç¨å€™ï¼Œæˆ‘ä»¬æ­£åœ¨ä¸ºæ‚¨å‡†å¤‡ç²¾å½©çš„æ—…ç¨‹...</p>
            </div>
        </div>

        <!-- é”™è¯¯çŠ¶æ€ -->
        <div id="errorState" class="hidden flex items-center justify-center py-20">
            <div class="bg-surface/80 backdrop-blur-xl rounded-3xl p-8 shadow-2xl text-center max-w-md border border-outline/20">
                <div class="text-error mb-4">
                    <i class="fas fa-exclamation-triangle text-5xl"></i>
                </div>
                <h3 class="text-xl font-semibold text-on-surface mb-2">åŠ è½½å¤±è´¥</h3>
                <p id="errorMessage" class="text-on-surface-variant mb-6">æ— æ³•åŠ è½½è¡Œç¨‹æ•°æ®</p>
                <button onclick="retryLoad()" class="px-6 py-3 bg-gradient-to-r from-brand-primary to-brand-secondary text-white rounded-xl hover:shadow-lg transition-all duration-300">
                    é‡æ–°åŠ è½½
                </button>
            </div>
        </div>

        <!-- ä¸»è¦å†…å®¹ -->
        <div id="mainContent" class="hidden">
            <!-- è¡Œç¨‹æ¦‚è§ˆ -->
            <div class="bg-gradient-to-r from-brand-primary/10 to-brand-secondary/10 rounded-3xl p-8 mb-8 border border-outline/20">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                    <div class="text-center">
                        <div class="text-3xl font-bold text-brand-primary mb-1" id="totalDays">-</div>
                        <div class="text-sm text-on-surface-variant">æ€»å¤©æ•°</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-brand-secondary mb-1" id="totalCost">Â¥-</div>
                        <div class="text-sm text-on-surface-variant">é¢„ç®—è´¹ç”¨</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-success mb-1" id="groupSize">-</div>
                        <div class="text-sm text-on-surface-variant">å‡ºè¡Œäººæ•°</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-warning mb-1" id="activitiesCount">-</div>
                        <div class="text-sm text-on-surface-variant">ç²¾é€‰æ´»åŠ¨</div>
                    </div>
                </div>
            </div>

            <!-- æ—¶é—´è½´è¡Œç¨‹ -->
            <div class="relative">
                <!-- æ—¶é—´è½´çº¿ -->
                <div class="absolute left-8 top-0 bottom-0 w-1 timeline-line rounded-full"></div>
                
                <!-- è¡Œç¨‹åˆ—è¡¨ -->
                <div id="timelineList" class="space-y-8">
                    <!-- åŠ¨æ€ç”Ÿæˆçš„æ—¶é—´è½´é¡¹ç›®å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let sessionId = null;
        let planData = null;
        let demoMode = false;

        // æ¼”ç¤ºæ•°æ® - æ­å·ä¸»é¢˜
        const demoData = {
            id: 'demo_session_002',
            title: 'æ­å·4æ—¥è¯—æ„ä¹‹æ—…',
            destination: 'æ­å·',
            totalDays: 4,
            startDate: '2025-08-20',
            endDate: '2025-08-23',
            totalCost: 2280,
            groupSize: 3,
            itinerary: [
                {
                    day: 1,
                    date: '8æœˆ20æ—¥ å‘¨äºŒ',
                    location: 'è¥¿æ¹–æ™¯åŒº',
                    weather: 'æ™´æœ—',
                    temperature: '29Â°C',
                    activities: [
                        {
                            time: '08:30-11:30',
                            title: 'è¥¿æ¹–åæ™¯æ¸¸è§ˆ',
                            description: 'æ¼«æ­¥è‹å ¤æ˜¥æ™“ï¼Œæ¬£èµæ–­æ¡¥æ®‹é›ªã€‚ä¹˜åæ¸¸èˆ¹æ¸¸è§ˆä¸‰æ½­å°æœˆï¼Œæ„Ÿå—"æ·¡å¦†æµ“æŠ¹æ€»ç›¸å®œ"çš„è¥¿æ¹–ç¾æ™¯ã€‚æœ€ä½³æ‹ç…§æ—¶é—´ä¸ºä¸Šåˆ9-10ç‚¹ã€‚',
                            icon: 'ğŸŒŠ',
                            cost: 55,
                            duration: 'çº¦3å°æ—¶',
                            period: 'ä¸Šåˆ'
                        },
                        {
                            time: '14:00-17:00',
                            title: 'çµéšå¯ºç¥ˆç¦',
                            description: 'å‚è®¿åƒå¹´å¤åˆ¹çµéšå¯ºï¼Œè§‚èµé£æ¥å³°çŸ³çªŸé€ åƒã€‚åœ¨å¤§é›„å®æ®¿è™”è¯šç¥ˆç¦ï¼Œæ„Ÿå—ä½›æ•™æ–‡åŒ–çš„æ·±åšåº•è•´ã€‚å»ºè®®ç©¿ç€å¾—ä½“ï¼Œä¿æŒå®‰é™ã€‚',
                            icon: 'ğŸ›ï¸',
                            cost: 75,
                            duration: 'çº¦3å°æ—¶',
                            period: 'ä¸‹åˆ'
                        },
                        {
                            time: '18:30-21:00',
                            title: 'æ²³åŠè¡—å¤œå¸‚',
                            description: 'å“å°æ­å·ç‰¹è‰²å°åƒï¼šè¥¿æ¹–é†‹é±¼ã€ä¸œå¡è‚‰ã€é¾™äº•è™¾ä»ã€‚è´­ä¹°ä¸ç»¸ã€èŒ¶å¶ç­‰ç‰¹äº§ï¼Œä½“éªŒæ­å·çš„å¸‚äº•æ–‡åŒ–å’Œå¤œç”Ÿæ´»ã€‚',
                            icon: 'ğŸ®',
                            cost: 180,
                            duration: 'çº¦2.5å°æ—¶',
                            period: 'æ™šä¸Š'
                        }
                    ]
                },
                {
                    day: 2,
                    date: '8æœˆ21æ—¥ å‘¨ä¸‰',
                    location: 'è¥¿æºªæ¹¿åœ°',
                    weather: 'å¤šäº‘',
                    temperature: '27Â°C',
                    activities: [
                        {
                            time: '09:00-12:00',
                            title: 'è¥¿æºªæ¹¿åœ°æ¢ç§˜',
                            description: 'ä¹˜åæ‘‡æ©¹èˆ¹æ·±å…¥æ¹¿åœ°è…¹åœ°ï¼Œè§‚èµåŸç”Ÿæ€çš„è‡ªç„¶é£å…‰ã€‚è¿™é‡Œæ˜¯ã€Šéè¯šå‹¿æ‰°ã€‹çš„æ‹æ‘„åœ°ï¼Œç”Ÿæ€ç¯å¢ƒä¼˜ç¾ï¼Œé¸Ÿç±»èµ„æºä¸°å¯Œã€‚',
                            icon: 'ğŸ¦†',
                            cost: 80,
                            duration: 'çº¦3å°æ—¶',
                            period: 'ä¸Šåˆ'
                        },
                        {
                            time: '14:30-17:30',
                            title: 'ä¸­å›½èŒ¶å¶åšç‰©é¦†',
                            description: 'äº†è§£ä¸­å›½èŒ¶æ–‡åŒ–çš„å‘å±•å†ç¨‹ï¼Œå“å°æ­£å®—é¾™äº•èŒ¶ã€‚å‚ä¸èŒ¶è‰ºè¡¨æ¼”ï¼Œå­¦ä¹ èŒ¶é“ç¤¼ä»ªï¼Œæ„Ÿå—"èŒ¶ä¸ºå›½é¥®"çš„æ–‡åŒ–å†…æ¶µã€‚',
                            icon: 'ğŸµ',
                            cost: 0,
                            duration: 'çº¦3å°æ—¶',
                            period: 'ä¸‹åˆ'
                        }
                    ]
                },
                {
                    day: 3,
                    date: '8æœˆ22æ—¥ å‘¨å››',
                    location: 'åƒå²›æ¹–',
                    weather: 'æ™´æœ—',
                    temperature: '31Â°C',
                    activities: [
                        {
                            time: '07:00-18:00',
                            title: 'åƒå²›æ¹–ä¸€æ—¥æ¸¸',
                            description: 'ä¹˜åæ¸¸è½®æ¸¸è§ˆåƒå²›æ¹–ï¼Œç™»ä¸Šæ¢…å³°å²›ä¿¯ç°ç¾¤å²›ç¾æ™¯ã€‚å‚è§‚é¾™å±±å²›ï¼Œäº†è§£å½“åœ°çš„å†å²æ–‡åŒ–ã€‚æ¹–æ°´æ¸…æ¾ˆï¼Œç©ºæ°”æ¸…æ–°ï¼Œæ˜¯å¤©ç„¶çš„æ°§å§ã€‚',
                            icon: 'â›µ',
                            cost: 298,
                            duration: 'å…¨å¤©',
                            period: 'å…¨å¤©'
                        }
                    ]
                },
                {
                    day: 4,
                    date: '8æœˆ23æ—¥ å‘¨äº”',
                    location: 'æ­å·å¸‚åŒº',
                    weather: 'æ™´æœ—',
                    temperature: '30Â°C',
                    activities: [
                        {
                            time: '09:30-12:00',
                            title: 'å®‹åŸä¸»é¢˜å…¬å›­',
                            description: 'ä½“éªŒå®‹ä»£æ–‡åŒ–ï¼Œè§‚çœ‹ã€Šå®‹åŸåƒå¤æƒ…ã€‹å¤§å‹æ¼”å‡ºã€‚å›­å†…æœ‰å„ç§å®‹ä»£å»ºç­‘å’Œæ°‘ä¿—è¡¨æ¼”ï¼Œè®©æ‚¨ç©¿è¶Šå›åˆ°ç¹åçš„å®‹æœæ—¶ä»£ã€‚',
                            icon: 'ğŸ­',
                            cost: 320,
                            duration: 'çº¦2.5å°æ—¶',
                            period: 'ä¸Šåˆ'
                        },
                        {
                            time: '14:00-16:30',
                            title: 'æ­å·ä¸ç»¸åšç‰©é¦†',
                            description: 'äº†è§£ä¸­å›½ä¸ç»¸çš„å†å²å’Œåˆ¶ä½œå·¥è‰ºï¼Œæ¬£èµç²¾ç¾çš„ä¸ç»¸åˆ¶å“ã€‚è¿™é‡Œæ˜¯ä¸­å›½ç¬¬ä¸€åº§ä¸ç»¸ä¸“ä¸šåšç‰©é¦†ï¼Œå±•å“ä¸°å¯Œï¼Œå·¥è‰ºç²¾æ¹›ã€‚',
                            icon: 'ğŸ§µ',
                            cost: 0,
                            duration: 'çº¦2.5å°æ—¶',
                            period: 'ä¸‹åˆ'
                        }
                    ]
                }
            ],
            createdAt: new Date().toISOString()
        };

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            sessionId = urlParams.get('sessionId');

            if (!sessionId) {
                console.log('ğŸ­ è¿›å…¥æ¼”ç¤ºæ¨¡å¼');
                demoMode = true;
                loadDemoData();
            } else {
                loadTravelPlan();
            }
        });

        // åŠ è½½æ¼”ç¤ºæ•°æ®
        function loadDemoData() {
            console.log('ğŸ­ åŠ è½½æ¼”ç¤ºæ•°æ®');
            planData = demoData;

            setTimeout(() => {
                renderTravelPlan();
            }, 1800);
        }

        // åŠ è½½æ—…è¡Œè®¡åˆ’æ•°æ®
        async function loadTravelPlan() {
            try {
                console.log('ğŸ“‹ è·å–æ—…è¡Œè®¡åˆ’ç»“æœ:', sessionId);

                const response = await fetch(`/api/v1/planning/sessions/${sessionId}`);
                const result = await response.json();

                if (!response.ok) {
                    throw new Error(result.error?.message || 'è·å–æ•°æ®å¤±è´¥');
                }

                if (result.success && result.data) {
                    planData = {
                        id: sessionId,
                        title: `${result.data.destination}æ·±åº¦æ¸¸`,
                        destination: result.data.destination,
                        totalDays: result.data.totalDays || 0,
                        startDate: result.data.startDate || '',
                        endDate: result.data.endDate || '',
                        totalCost: calculateTotalCost(result.data.result?.itinerary || []),
                        groupSize: result.data.userPreferences?.groupSize || 2,
                        itinerary: result.data.result?.itinerary || [],
                        createdAt: new Date().toISOString()
                    };

                    renderTravelPlan();
                } else {
                    throw new Error('æ— æ•ˆçš„å“åº”æ•°æ®');
                }
            } catch (error) {
                console.error('âŒ åŠ è½½æ—…è¡Œè®¡åˆ’å¤±è´¥:', error);
                console.log('ğŸ­ APIè°ƒç”¨å¤±è´¥ï¼Œåˆ‡æ¢åˆ°æ¼”ç¤ºæ¨¡å¼');
                demoMode = true;
                loadDemoData();
            }
        }

        // è®¡ç®—æ€»è´¹ç”¨
        function calculateTotalCost(itinerary) {
            let total = 0;
            itinerary.forEach(day => {
                if (day.activities) {
                    day.activities.forEach(activity => {
                        total += activity.cost || 0;
                    });
                }
            });
            return total;
        }

        // è®¡ç®—æ´»åŠ¨æ€»æ•°
        function calculateActivitiesCount(itinerary) {
            let count = 0;
            itinerary.forEach(day => {
                if (day.activities) {
                    count += day.activities.length;
                }
            });
            return count;
        }

        // æ¸²æŸ“æ—…è¡Œè®¡åˆ’
        function renderTravelPlan() {
            // æ›´æ–°æ ‡é¢˜
            document.getElementById('planTitle').textContent = planData.title;
            document.getElementById('planSubtitle').textContent =
                `${planData.destination} Â· ${formatDateRange(planData.startDate, planData.endDate)}${demoMode ? ' (æ¼”ç¤ºæ¨¡å¼)' : ''}`;

            // æ›´æ–°æ¦‚è§ˆæ•°æ®
            document.getElementById('totalDays').textContent = planData.totalDays;
            document.getElementById('totalCost').textContent = `Â¥${planData.totalCost}`;
            document.getElementById('groupSize').textContent = `${planData.groupSize}äºº`;
            document.getElementById('activitiesCount').textContent = calculateActivitiesCount(planData.itinerary);

            // æ¸²æŸ“æ—¶é—´è½´
            const timelineList = document.getElementById('timelineList');
            timelineList.innerHTML = '';

            if (planData.itinerary && planData.itinerary.length > 0) {
                planData.itinerary.forEach((day, index) => {
                    const timelineItem = createTimelineItem(day, index + 1);
                    timelineList.appendChild(timelineItem);
                });
            } else {
                timelineList.innerHTML = `
                    <div class="ml-20 bg-surface/80 backdrop-blur-xl rounded-3xl p-8 shadow-lg text-center border border-outline/20">
                        <div class="text-on-surface-variant mb-4">
                            <i class="fas fa-calendar-day text-5xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-on-surface mb-2">è¡Œç¨‹è¯¦æƒ…ç”Ÿæˆä¸­</h3>
                        <p class="text-on-surface-variant">æ­£åœ¨ä¸ºæ‚¨ç”Ÿæˆè¯¦ç»†çš„æ¯æ—¥è¡Œç¨‹å®‰æ’...</p>
                    </div>
                `;
            }

            // æ˜¾ç¤ºä¸»è¦å†…å®¹
            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('mainContent').classList.remove('hidden');
        }

        // åˆ›å»ºæ—¶é—´è½´é¡¹ç›®
        function createTimelineItem(dayData, dayNumber) {
            const item = document.createElement('div');
            item.className = 'relative pl-20';
            
            item.innerHTML = `
                <!-- æ—¶é—´è½´ç‚¹ -->
                <div class="absolute left-6 w-4 h-4 bg-brand-primary rounded-full timeline-dot"></div>
                
                <!-- æ—¥ç¨‹å¡ç‰‡ -->
                <div class="bg-surface/80 backdrop-blur-xl rounded-3xl shadow-lg overflow-hidden border border-outline/20 hover:shadow-xl transition-all duration-300">
                    <div class="bg-gradient-to-r from-brand-primary/5 to-brand-secondary/5 p-6 border-b border-outline/10">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="text-2xl font-bold text-on-surface mb-1">ç¬¬ ${dayNumber} å¤©</h3>
                                <p class="text-on-surface-variant">${dayData.date || formatDate(dayNumber)}</p>
                            </div>
                            <div class="text-right">
                                <p class="text-on-surface-variant flex items-center gap-2">
                                    <i class="fas fa-map-marker-alt text-brand-primary"></i>
                                    ${dayData.location || planData.destination}
                                </p>
                                <p class="text-on-surface-variant flex items-center gap-2 mt-1">
                                    <i class="fas fa-thermometer-half text-brand-secondary"></i>
                                    ${dayData.weather || 'æ™´æœ—'} ${dayData.temperature || '25Â°C'}
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="p-6">
                        <div class="space-y-6">
                            ${(dayData.activities || []).map((activity, actIndex) => `
                                <div class="flex items-start gap-4 p-4 rounded-2xl bg-gradient-to-r from-surface-variant/30 to-transparent hover:from-surface-variant/50 transition-all duration-300">
                                    <div class="text-3xl">${activity.icon || 'ğŸ“'}</div>
                                    <div class="flex-1">
                                        <div class="flex items-center gap-3 mb-2">
                                            <span class="px-3 py-1 bg-brand-primary/10 text-brand-primary rounded-full text-sm font-medium">
                                                ${activity.time || 'å…¨å¤©'}
                                            </span>
                                            <span class="text-sm text-on-surface-variant">${activity.period || ''}</span>
                                        </div>
                                        <h4 class="text-lg font-semibold text-on-surface mb-2">${activity.title}</h4>
                                        <p class="text-on-surface-variant mb-3 leading-relaxed">${activity.description}</p>
                                        <div class="flex items-center gap-6 text-sm text-on-surface-variant">
                                            <span class="flex items-center gap-1">
                                                <i class="fas fa-clock text-brand-primary"></i>
                                                ${activity.duration || 'çº¦2å°æ—¶'}
                                            </span>
                                            ${activity.cost ? `
                                                <span class="flex items-center gap-1">
                                                    <i class="fas fa-yen-sign text-success"></i>
                                                    Â¥${activity.cost}
                                                </span>
                                            ` : ''}
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
            
            return item;
        }

        // æ ¼å¼åŒ–æ—¥æœŸ
        function formatDate(dayNumber) {
            if (!planData.startDate) return `ç¬¬${dayNumber}å¤©`;
            
            const startDate = new Date(planData.startDate);
            const currentDate = new Date(startDate);
            currentDate.setDate(startDate.getDate() + dayNumber - 1);
            
            return currentDate.toLocaleDateString('zh-CN', { 
                month: 'long', 
                day: 'numeric',
                weekday: 'long'
            });
        }

        // æ ¼å¼åŒ–æ—¥æœŸèŒƒå›´
        function formatDateRange(startDate, endDate) {
            if (!startDate || !endDate) return '';
            
            const start = new Date(startDate);
            const end = new Date(endDate);
            
            return `${start.toLocaleDateString('zh-CN', { month: 'short', day: 'numeric' })} - ${end.toLocaleDateString('zh-CN', { month: 'short', day: 'numeric' })}`;
        }

        // æ˜¾ç¤ºé”™è¯¯
        function showError(message) {
            document.getElementById('errorMessage').textContent = message;
            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('errorState').classList.remove('hidden');
        }

        // é‡è¯•åŠ è½½
        function retryLoad() {
            document.getElementById('errorState').classList.add('hidden');
            document.getElementById('loadingState').classList.remove('hidden');
            loadTravelPlan();
        }

        // è¿”å›ä¸Šä¸€é¡µ
        function goBack() {
            if (window.history.length > 1) {
                window.history.back();
            } else {
                window.location.href = '/planning';
            }
        }
    </script>
</body>
</html>
